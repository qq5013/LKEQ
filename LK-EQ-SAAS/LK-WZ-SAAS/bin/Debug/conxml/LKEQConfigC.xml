<?xml version="1.0" encoding="utf-8" ?>
<opts>

  <Opt id="SELTABLE_List">
    <sql>
      <![CDATA[ 
		   select * from His.用户表  
	     ]]>
    </sql>    　　
  </Opt>
  <!--设备库房管理开始-->
  <Opt id="FindEQWares">
    <sql>
      <![CDATA[
      select a.*,名称 as DEPTName from LKEQ.DICTEQWARE a , HIS.科室表 ks where a.choscode = ? [Condition] and a.DEPTID=ks.ID order by warecode asc 
      ]]>
    </sql>
    <Pa name="choscode"/>
  </Opt>


  <Opt id="FindEQWare">
    <sql>
      <![CDATA[
     select * from LKEQ.DICTEQWARE
     ]]>
    </sql>
    <Pa name="choscode"/>
  </Opt>



  <Opt id="FindEQKSID">
    <sql>select 名称,ID,上级科室,级别,农合名称 from HIS.科室表 where choscode= ? and (ID like ? or 名称 like ? or 代码 like ?)  </sql>
  </Opt>

  <Opt id="EQWare_GetDepID">
    <sql>
      select DEPTID from LKEQ.DICTEQWARE where choscode=? and WARECODE=?
    </sql>
  </Opt>

  <Opt id="SaveEQInfo" key="warecode,choscode" table="LKEQ.DICTEQWARE">
    <Pa name="warecode" update="false"/>
    <Pa name="choscode" update="false"/>
    <Pa name="warename"/>
    <Pa name="pycode"/>
    <Pa name="wbcode"/>
    <Pa name="deptid"/>
    <Pa name="ifall"/>
    <Pa name="ifuse"/>
    <Pa name="memo"/>
    <Pa name="userid" update="false"/>
    <Pa name="username" update="false"/>
    <Pa name="recdate"/>
  </Opt>


  <Opt id="ModifyEQInfoIsRepeat">
    <sql>select count(*) from LKEQ.DICTEQWARE where choscode=? and warecode!=? and warename=?</sql>
    <Pa name="choscode"/>
    <Pa name="warecode"/>
    <Pa name="warename"/>
  </Opt>

  <!--是否在细表内有类别编码-->
  <Opt id="IsHaveEQkindcode">
    <sql>select count(*) from LKEQ.DICTEQWAREDETAIL where choscode=? and warecode=?</sql>
    <Pa name="choscode"/>
    <Pa name="warecode"/>
  </Opt>

  <!--添加时是否重复-->
  <Opt id="AddEQInfoIsRepeat">
    <sql>select count(*) from LKEQ.DICTEQWARE where choscode=? and warename=? </sql>
    <Pa name="choscode"/>
    <Pa name="warename"/>
  </Opt>

  <Opt id="SaveEQInfo_seq">
    <sql>select max(to_number(warecode)) from LKEQ.DICTEQWARE where choscode=? </sql>
    <Pa name="choscode"/>
  </Opt>


  <Opt id="GetEQKindCode">
    <sql>select KINDNAME,KINDCODE,PYCODE,WBCODE,IFEND,MEMO from LKEQ.DICTEQKIND where choscode=? and (KINDCODE like ? or KINDNAME like ? or upper(PYCODE) like upper(?) or upper(WBCODE) like upper(?))</sql>
    <Pa name="choscode"/>
  </Opt>

  <Opt id="ManageEQKind">
    <sql>
      <![CDATA[
        select a.KINDCODE,a.SUPERCODE,KINDNAME,a.MEMO,a.CHOSCODE from LKEQ.DICTEQKIND a ,LKEQ.DICTEQWAREDETAIL b where a.CHOSCODE=b.CHOSCODE and a.KINDCODE=b.KINDCODE  and b.CHOSCODE=? and b.WARECODE=?
      ]]>
    </sql>
  </Opt>

  <!--针对设备细表，直接调用Save-->
  <Opt id="SaveSetEQDetail" key="WARECODE,CHOSCODE,KINDCODE" table="LKEQ.DICTEQWAREDETAIL">
    <!--<sql>insert into LKWZ.DICTWZWAREDETAIL (WARECODE,CHOSCODE,KINDCODE) values (?,?,?)</sql>-->
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="KINDCODE"/>
  </Opt>

  <Opt id="IsUseEQKindCode">
    <sql>
      <![CDATA[
        select count(a.*) from LKEQ.EQSTOCK a,LKEQ.DICTEQ b where a.EQID=b.EQID and a.NUM >0 and b.KINDCODE like concat(?,'%') and a.WARECODE=?
      ]]>
    </sql>
  </Opt>

  <Opt id="DeleteEQKind">
    <sql>
      delete from LKEQ.DICTEQWAREDETAIL where WARECODE=? and CHOSCODE=? and KINDCODE=?
    </sql>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="KINDCODE"/>
  </Opt>
  <!--//SELECT WARECODE FROM LKEQ.DICTEQWARERIGHT WHERE WARECODE=?-->
  <!--验证是否被其他表使用，与之相关的表有[EQWAREDETAIL]   [EQWARERIGHT]  [EQINMAIN] [EQOUTMAIN]  [EQPDMAIN]  [EQPLANMAIN]  [EQSTOCK] [EQSTOCKDETAIL]-->
  <Opt id="IsHaveUseEQWareInfo">
    <sql>SELECT COUNT(*) FROM ((SELECT WARECODE FROM LKEQ.DICTEQWAREDETAIL WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.DICTEQWARERIGHT WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.EQINMAIN WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.EQOUTMAIN WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.EQPDMAIN WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.EQPLANMAIN WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.EQSTOCK WHERE WARECODE=?)UNION ALL(SELECT WARECODE FROM LKEQ.EQSTOCKDETAIL WHERE WARECODE=?))</sql>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WARECODE"/>
  </Opt>

  <Opt id="DelEQInfo" sucMsg="成功删除设备信息！">
    <sql>DELETE from LKEQ.DICTEQWARE  where WARECODE =? AND CHOSCODE=? </sql>
    <!--<sql>delete from LKEQ.DICTEQWARE where choscode=? and warecode=?</sql>-->
    <Pa name="WARECODE"/>
    <Pa name ="CHOSCODE"/>
  </Opt>


  <Opt id="DisableOrEnableEQInfo">
    <sql>update LKEQ.DICTEQWARE set ifuse=? where choscode=? and warecode=?</sql>
    <Pa name="ifuse"/>
    <Pa name="choscode"/>
    <Pa name="warecode"/>
  </Opt>
  <!--设备库房管理结束-->





  <!--设备类别统计开始-->
  <Opt id="FindEQCountKindInfo">
    <sql>select  COUNTCODE,SUPERCODE,COUNTNAME,PYCODE,WBCODE,IFEND,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKEQ.DICTEQCOUNTKIND where CHOSCODE=? order by COUNTCODE</sql>
  </Opt>


  <Opt id="QiTingEQCountKind">
    <sql>UPDATE LKEQ.DICTEQCOUNTKIND SET IFUSE=? WHERE CHOSCODE=? and COUNTCODE=? </sql>
    <Pa name="IFUSE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="COUNTCODE"/>
  </Opt>

  <Opt id="SaveCountKind" key="COUNTCODE" table="LKEQ.DICTEQCOUNTKIND">
    <!--<Pa nane="COUNTCODE" update="false"/>
    <Pa name="CHOSCODE" update="false" />
    <Pa name="SUPERCODE"/>
    <Pa name="COUNTNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="WBCODE"/>
    <Pa name="IFEND"/>
    <Pa name="IFUSE"/>
    <Pa name="MEMO"/>
    <Pa name="USERID" update="false" />
    <Pa name="USERNAME" update="false" />
    <Pa name="RECDATE"/>-->

    <Pa name="SUPERCODE"/>
    <Pa name="COUNTNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="WBCODE"/>
    <Pa name="IFEND" />
    <Pa name="IFUSE" />
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE" update="false"/>
    <Pa name="COUNTCODE" insert="true" update="false"/>
  </Opt>

  <!--无论是编辑还是新增，都不允许出现与当前缩写的名称是一样的-->
  <Opt id="isRepeatCountName">
    <sql>select count(*) from LKEQ.DICTEQCOUNTKIND where CHOSCODE=? and COUNTNAME=? and COUNTCODE!=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="COUNTNAME"/>
    <Pa name="COUNTCODE"/>
  </Opt>

  <Opt id="GetEQCountCode">
    <sql>
      select  count(*) as num  from LKEQ.DICTEQCOUNTKIND where SUPERCODE=? AND CHOSCODE=?
    </sql>
    <Pa name="SUPERCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="SetSuperEQCKNotEnd">
    <sql>
      UPDATE LKEQ.DICTEQCOUNTKIND SET  IFEND=0 where COUNTCODE=? AND CHOSCODE=?
    </sql>
    <Pa name="COUNTCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--查询当前COUNTCODE作为SUPERCODE的子目录-->
  <Opt id="IsHaveChildCK">
    <sql>SELECT COUNT(*) FROM LKEQ.DICTEQCOUNTKIND  where SUPERCODE=? AND CHOSCODE=?</sql>
    <Pa name="COUNTCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="IfHaveUse_EQCountKindManag">
    <sql>SELECT COUNT(*) from LKEQ.DICTEQCOUNTKIND a where a.COUNTCODE in(SELECT COUNTCODE FROM LKEQ.DICTEQ) AND CHOSCODE=? AND COUNTCODE=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="COUNTCODE"/>
  </Opt>


  <Opt id="DelEQCKInfo_EQCountKindManag">
    <sql>DELETE FROM LKEQ.DICTEQCOUNTKIND  WHERE CHOSCODE=? AND COUNTCODE=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="COUNTCODE"/>
  </Opt>

  <Opt id="SetSuperEQCKEnd_EQCountKindManag">
    <sql>UPDATE LKEQ.DICTEQCOUNTKIND SET IFEND=1 WHERE CHOSCODE=? AND COUNTCODE=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="SUPERCODE"/>
  </Opt>
  <!--设备类别统计结束-->





  <!--设备状态管理开始 STATUSCODE,STATUSNAME,PYCODE,WBCODE,IFUSE,IFDEPRECIATION,IFDEFAULT,MEMO,USERID,USERNAME,RECDATE,CHOSCODE-->

  <Opt id="FindStatusManagInfo">
    <sql>SELECT * FROM LKEQ.DICTEQSTATUS WHERE CHOSCODE=? [Condition] </sql>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="QiTingEQStatus_EQStatusManag">
    <sql>UPDATE  LKEQ.DICTEQSTATUS SET IFUSE=? WHERE STATUSCODE=? AND CHOSCODE=? </sql>
    <Pa name="IFUSE"/>
    <Pa name="STATUSCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQStatusInfo">
    <sql>DELETE  LKEQ.DICTEQSTATUS WHERE CHOSCODE=? AND STATUSCODE=? </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="STATUSCODE"/>
  </Opt>

  <Opt id="GetStatusCodeMax_EQStatusManag">
    <sql>SELECT MAX(STATUSCODE) FROM LKEQ.DICTEQSTATUS WHERE CHOSCODE=?</sql>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="IsHaveRepetEQStatusName">
    <sql>SELECT COUNT(*) FROM LKEQ.DICTEQSTATUS WHERE CHOSCODE=? AND STATUSNAME=? AND STATUSCODE!=?  </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="STATUSNAME"/>
    <Pa name="STATUSCODE"/>
  </Opt>

  <Opt id="IfHaveUseEQStatus">
    <sql>SELECT COUNT(*) FROM LKEQ.EQCARDREC WHERE CHOSCODE=? AND STATUSCODE=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="STATUSCODE"/>
  </Opt>
  <!--statuscode, statusname, pycode,    wbcode,  ifuse(1), ifdepreciation,
  ifdefault(0),   memo,     userid,    username,  recdate,  choscode-->

  <Opt id="SaveEQStatusInfo" key="STATUSCODE" table="LKEQ.DICTEQSTATUS">
    <Pa name="STATUSCODE" insert="true" update="false"/>
    <Pa name="STATUSNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="WBCODE"/>
    <Pa name="IFUSE"/>
    <Pa name="IFDEPRECIATION"/>
    <Pa name="IFDEFAULT"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE" update="false"/>
  </Opt>
  <!--设备状态管理结束-->






  <!--设备入出库管理开始-->
  <Opt id="FindEQInOutInfo">
    <sql>SELECT * FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=? [Condition]</sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="QiTingEQInOutInfo_EQInOutManag">
    <sql>UPDATE LKEQ.DICTEQINOUT SET IFUSE=? WHERE CHOSCODE=? AND IOID=? </sql>
    <Pa name="IFUSE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="IOID"/>
  </Opt>

  <Opt id="DelEQInOutInfo_EQInOutManag">
    <sql>DELETE FROM LKEQ.DICTEQINOUT WHERE IOID=? AND CHOSCODE=?</sql>
    <Pa name="IOID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="IfHaveUseEQInOut">
    <sql>SELECT COUNT(*) FROM ((SELECT IOID FROM LKEQ.EQCARDNOREC WHERE IOID=?)UNION ALL(SELECT IOID FROM LKEQ.EQINMAIN WHERE IOID=?)UNION ALL(SELECT IOID FROM LKEQ.EQOUTMAIN WHERE IOID=?))</sql>
    <Pa name="IOID"/>
    <Pa name="IOID"/>
    <Pa name="IOID"/>
  </Opt>

  <Opt id="IsHaveRepeatInOutName">
    <sql>SELECT COUNT(*) FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=? AND IONAME=? AND IOID!=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="IONAME"/>
    <Pa name="IOID"/>
  </Opt>

  <!--相同的医疗机构编码、入出标志、操作标志的记录里，只能有一条记录的默认值为1-->
  <Opt id="IsHaveMoreDefault_EQInOutManag">
    <sql>SELECT COUNT(*) FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=? AND IOFLAG=? AND OPFLAG=? AND IFDEFAULT=1 AND IOID!=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="IOFLAG"/>
    <Pa name="OPFLAG"/>
    <Pa name="IOID"/>
  </Opt>

  <Opt id="GetEQInOutIDMax">
    <sql>SELECT MAX(IOID) FROM LKEQ.DICTEQINOUT</sql>
  </Opt>


  <Opt id="IsSingleInOutOfCHOS">
    <sql> SELECT COUNT(*) FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=? AND OPFLAG=? AND IOFLAG=? AND IOID!=?</sql>
    <Pa name="CHOSCODE"/>
    <Pa name="OPFLAG"/>
    <Pa name="IOFLAG"/>
    <Pa name="IOID"/>
  </Opt>

  <!--验证：对于一个医疗机构来说，其操作类别为（1：调拨；2：申领；3：盘点）的出入库类型记录
  //其入库和出库的类型记录，分别各有且只能有一条记录；
  //如医疗机构甲，其调拨的入库方式，只能有一种方式，其调拨的出库方式，也只能有一种方式；-->



  <!--ioid, ioname, pycode, wbcode, ifuse, recipecode, recipelength,
  recipeyear, recipemonth, memo, ioflag, opflag, ifdefault, userid,
  username, recdate, choscode-->

  <Opt id="SaveEQInOutInfo" key="IOID" table="LKEQ.DICTEQINOUT">
    <Pa name="IOID" update="false" insert="true"/>
    <Pa name="IONAME"/>
    <Pa name="PYCODE"/>
    <Pa name="WBCODE"/>
    <Pa name="IFUSE"/>
    <Pa name="RECIPECODE"/>
    <Pa name="RECIPELENGTH"/>
    <Pa name="RECIPEYEAR"/>

    <Pa name="RECIPEMONTH"/>
    <Pa name="MEMO"/>
    <Pa name="IOFLAG"/>
    <Pa name="OPFLAG"/>
    <Pa name="IFDEFAULT"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="IsHaveAnyDataEQInOut_EQInOutManag">
    <sql>SELECT COUNT(*) FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=?</sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindEQInOutcode0_EQInOutManag">
    <sql>select * from LKEQ.DICTEQINOUT WHERE CHOSCODE='0'</sql>
  </Opt>

  <!--设备入出库管理结束-->


  <!--好难的调拨管理开始了-->
  <!--<Opt id="WareBindInDiaoBo">
    <sql>SELECT WARENAME AS 库房名, WARECODE AS 库房编码 , DEPTID AS 科室, IFUSE AS 是否使用 FROM LKEQ.DICTEQWARE WHERE  IFUSE=1 AND CHOSCODE=? AND (WARENAME LIKE ? OR WARECODE LIKE ?)</sql>
  </Opt>1218-->

  <Opt id="WareBindInDiaoBo">
    <sql>SELECT WARENAME AS 库房名, WARECODE AS 库房编码 , DEPTID AS 科室, IFUSE AS 是否使用 FROM LKEQ.DICTEQWARE WHERE  IFUSE=1 AND CHOSCODE=? AND (WARENAME LIKE (?) OR WARECODE LIKE (?) OR upper(PYCODE) like upper(?) OR upper(WBCODE) like upper(?))</sql>
  </Opt>
  
  <Opt id="LoadEQOutMainInfo">
    <sql> select * from LKEQ.EQOUTMAIN WHERE OPFLAG=1 AND CHOSCODE =? AND WARECODE=? [Condition] AND OUTDATE&gt;? AND OUTDATE &lt;? </sql>
  </Opt>

  <Opt id="LoadEQOutDetailList">
    <sql>select * from LKEQ.EQOUTDETAIL WHERE OUTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="FindWareNameInEQDiaoBo">
    <sql>SELECT WARECODE,WARENAME FROM LKEQ.DICTEQWARE WHERE IFUSE=1 AND CHOSCODE=?</sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindOutNameInEQDiaoBo">
    <sql>SELECT IOID,IONAME FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=? AND OPFLAG=1 AND IOFLAG=1 AND IFUSE=1</sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindUnitNameInEQDiaoBo">
    <sql>SELECT DISTINCT DICID,DICDESC FROM HIS.字典表 WHERE DICGRPID='450'</sql>
  </Opt>


  <Opt id="FindEQIdNameInEQDiaoBo">
    <sql>SELECT EQID,EQNAME FROM LKEQ.DICTEQ a WHERE CHOSCODE=? AND a.EQID in (SELECT EQID FROM LKEQ.EQSTOCK WHERE WARECODE=?)</sql>
  </Opt>

  <Opt id="ReBindEQInfo">
    <sql>SELECT EQID,EQNAME FROM LKEQ.DICTEQ a WHERE CHOSCODE=? AND a.EQID in (SELECT EQID FROM LKEQ.EQSTOCK WHERE WARECODE=? AND  NUM &gt;0)</sql>
  </Opt>

  <Opt id="LingYongEQIdNameBind">
    <sql>SELECT EQID,EQNAME FROM LKEQ.DICTEQ a WHERE CHOSCODE=?</sql>
  </Opt>


  <Opt id="FindIfCanFKC">
    <sql>
      SELECT DISTINCT SYSVALUE FROM HIS.系统参数 WHERE ID=?
    </sql>
  </Opt>

  <Opt id="KuCunLiuShuiBind">
    <sql>SELECT FLOWNO FROM LKEQ.EQSTOCKDETAIL WHERE WARECODE=? AND CHOSCODE=?</sql>
  </Opt>


  <!--操作标志=1 and 入出标志=1 and 是否使用=1”的出入库字典记录里选择-->
  <Opt id="outflagBindInDiaoBoEidt">
    <sql>SELECT IONAME AS 出库方式 ,IOID AS 出库ID, IFUSE AS 是否使用,RECIPECODE AS 单据前缀 FROM LKEQ.DICTEQINOUT WHERE CHOSCODE=? AND IOFLAG=1 AND OPFLAG=1 AND IFUSE=1 AND (IOID LIKE ? OR IONAME LIKE ?) </sql>
  </Opt>


  <Opt id="WareNameFindInEQDiaoBo">
    <sql>SELECT WARECODE FROM LKEQ.EQOUTMAIN WHERE OUTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="TargetWareNameFindInEQDiaoBo">
    <sql>SELECT TARGETWARECODE FROM LKEQ.EQOUTMAIN WHERE OUTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="OutStyleFindInEqDiaoBo">
    <sql>SELECT  FROM LKEQ.EQINOUT IOID=? AND CHOSCODE=?</sql>
  </Opt>











  <!--已经废弃掉了-->
  <Opt id="XBInEQDiaoBoEdit1">
    <!--<sql>SELECT a.*, b.EQNAME from LKEQ.EQOUTDETAIL a,LKEQ.DICTEQ b where a.OUTID=? and a.EQID=b.EQID AND CHOSCODE=?</sql>-->
    <!--根据所选的设备来获取所有的库存流水号-->
    <sql>
      SELECT c.EQNAME AS 设备名称, (b.NUM-b.OUTNUM) AS 库存余量, a.EQID AS 设备ID , a.DETAILNO AS 流水号 , a.OUTID AS 出库ID, a.NUM  AS 数量, a.UNITCODE AS 单位 , a.PRICE AS 单价 , a.MONEY AS 金额 , a.GG AS  规格, a.XH AS 型号, a.CD AS  产地, a.OTHERMONEY AS  运杂费, a.TOTALPRICE AS 成本单价,a.TOTALMONEY AS 成本金额 , a.TXM  AS 条形码 ,  a.CHOSCODE AS  医疗机构编码, a.STOCKFLOWNO  AS 库存流水号, a.SUPPLYID  AS 生产厂家ID, a.SUPPLYNAME  AS 生产厂家名称 , a.PRODUCTDATE  AS 生产日期 ,a.VALIDDATE AS 有效日期 , a.MEMO AS  备注 FROM LKEQ.EQOUTDETAIL a,
      LKEQ.EQSTOCKDETAIL b,LKEQ.DICTEQ c  WHERE a.Stockflowno=b.flowno AND a.CHOSCODE=?

      <!--SELECT (b.NUM-b.OUTNUM) AS 库存余量, a.EQID AS 设备ID , a.DETAILNO AS 流水号 , a.OUTID AS 出库ID, a.NUM  AS 数量, a.UNITCODE AS 单位 , a.PRICE AS 单价 , a.MONEY AS 金额 , a.GG AS  规格, a.XH AS 型号, a.CD AS  产地, a.OTHERMONEY AS  运杂费, a.TOTALPRICE AS 成本单价,a.TOTALMONEY AS 成本金额 , a.TXM  AS 条形码 ,  a.CHOSCODE AS  医疗机构编码, a.STOCKFLOWNO  AS 库存流水号, a.SUPPLYID  AS 生产厂家ID, a.SUPPLYNAME  AS 生产厂家名称 , a.PRODUCTDATE  AS 生产日期 ,a.VALIDDATE AS 有效日期 , a.MEMO AS  备注 FROM LKEQ.EQOUTDETAIL a,
      LKEQ.EQSTOCKDETAIL b  WHERE a.Stockflowno=b.flowno AND A.OUTID=? AND CHOSCODE=?-->
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>








  <Opt id="XBInEQDiaoBoEdit">
    <sql>
      SELECT a.*, b.EQNAME,(c.NUM-c.OUTNUM) AS 库存余量 from LKEQ.EQOUTDETAIL a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c where a.OUTID=?  AND a.CHOSCODE=? AND a.STOCKFLOWNO=c.flowno AND a.EQID=b.EQID
    </sql>
    <!--<sql>SELECT a.*, b.EQNAME,(c.NUM-c.OUTNUM) AS 库存余量 from LKEQ.EQOUTDETAIL a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c where a.OUTID=? AND a.EQID=b.EQID AND a.CHOSCODE=? AND a.STOCKFLOWNO=c.flowno</sql>-->
  </Opt>





  <Opt id="XBKCLSSelInput">
    <sql>
      <!--SELECT a.FLOWNO AS 库存流水号 , (a.NUM-a.OUTNUM) AS 库存余量, a.NUM  AS 已入库数量,a.OUTNUM AS 出库数量,
      a.PRICE AS 单价,a.UNITCODE AS 单位,a.GG AS  规格, a.XH AS 型号, a.CD AS  产地, a.TXM  AS 条形码 ,
      a.PRODUCTDATE  AS 生产日期 ,a.VALIDDATE AS 有效期 ,a.SUPPLYID  AS 生产厂家ID, a.SUPPLYNAME  AS 生产厂家名称
      FROM LKEQ.EQSTOCKDETAIL a,LKEQ.EQSTOCK b  WHERE  a.EQID=b.EQID AND b.WARECODE=? AND b.EQID=? AND a.NUM-a.OUTNUM &gt; 0 AND a.CHOSCODE=? AND (a.FLOWNO LIKE ? OR SUPPLYNAME LIKE ?)-->


      SELECT a.FLOWNO AS 库存流水号 , (a.NUM-a.OUTNUM) AS 库存余量, a.NUM  AS 已入库数量,a.OUTNUM AS 出库数量,
      a.PRICE AS 单价,a.UNITCODE AS 单位,a.GG AS  规格, a.XH AS 型号, a.CD AS  产地, a.TXM  AS 条形码 ,
      a.PRODUCTDATE  AS 生产日期 ,a.VALIDDATE AS 有效期 ,a.SUPPLYID  AS 生产厂家ID, a.SUPPLYNAME  AS 生产厂家名称
      FROM LKEQ.EQSTOCKDETAIL a,LKEQ.EQSTOCK b  WHERE a.STOCKID=b.STOCKID AND a.EQID=b.EQID AND b.WARECODE=? AND b.EQID=? AND  a.NUM-a.OUTNUM &gt; 0 AND a.CHOSCODE=? AND (a.FLOWNO LIKE ? OR SUPPLYNAME LIKE ?)
    </sql>
  </Opt>

  <!--<Opt id="XBInEQDiaoBoEdit11">
    <sql>
      --><!--SELECT b.EQNAME AS 设备名称,a.EQID AS 设备ID,a.NUM AS 库存 ,c.FLOWNO AS 库存流水号,c.UNITCODE AS 单位编码
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID AND a.WARECODE=? AND a.NUM &gt;0 AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)--><!--
      SELECT  b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID  AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0   AND a.NUM &gt; 0 AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)
    </sql>
  </Opt>-->

  <Opt id="XBInEQDiaoBoEdit11">
    <sql>

      SELECT  b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID  AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0   AND a.NUM &gt; 0 AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ? OR  upper(b.PYCODE) like upper(?) OR upper(b.WBCODE) like upper(?))
    </sql>
  </Opt>

  <!--<Opt id="XBInEQDiaoBoEdit12">
    <sql>
      --><!--SELECT b.EQNAME AS 设备名称, a.EQID AS 设备ID,a.NUM AS 库存,c.FLOWNO AS 库存流水号,c.UNITCODE AS 单位编码
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID  AND  a.EQID=c.EQID AND a.WARECODE=? AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)--><!--
      SELECT  b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID  AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0   AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)
    </sql>
  </Opt>-->

  <Opt id="XBInEQDiaoBoEdit12">
    <sql>
         SELECT  b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID  AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0   AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ? OR  upper(b.PYCODE) like upper(?) OR upper(b.WBCODE) like upper(?))
    </sql>
  </Opt>

  <Opt id="FindYunZaFeiInEQDiaoBO">
    <sql>SELECT OTHERMONEY,NUM FROM LKEQ.EQSTOCKDETAIL  WHERE FLOWNO=? AND CHOSCODE=? </sql>
  </Opt>



  <Opt id="submitShenHeInfo">
    <sql>UPDATE LKEQ.EQOUTMAIN SET STATUS=? WHERE CHOSCODE=? AND OUTID=?</sql>
    <Pa name="STATUS"/>
    <Pa name="CHOSCODE"/>
    <Pa name="OUTID"/>
  </Opt>

  <Opt id="GetSysDanWeiInEQDiaoBoEdit">
    <sql>SELECT DISTINCT SYSVALUE FROM HIS.系统参数 WHERE ID=?</sql>
    <Pa name="ID"/>
  </Opt>


  <Opt id="FindYunzaFeiInfo">
    <sql>SELECT OTHERMONEY AS 运杂费,NUM AS 数量 FROM LKEQ.EQSTOCKDETAIL WHERE EQID=? AND CHOSCODE=?</sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindKuCunByEQId">
    <sql>SELECT FLOWNO AS 库存流水号  FROM LKEQ.EQSTOCKDETAIL WHERE EQID=? AND WARECODE=? AND CHOSCODE=?</sql>
    <Pa name="EQID"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--GG XH  CD TXM   SUPPLYID  SUPPLYNAME  PRODUCTDATE VALIDDATE MEMO-->

  <Opt id="FindMoreInfoByFlowNo">
    <sql>SELECT GG AS 规格,XH AS 型号,CD AS 产地,TXM AS 条形码,SUPPLYID AS 生产厂家ID,SUPPLYNAME AS 生产厂家名称,PRODUCTDATE AS 生产日期,VALIDDATE AS 有效期,MEMO AS 备注 FROM LKEQ.EQOUTDETAIL WHERE DETAILNO=? AND CHOSCODE=?</sql>
    <Pa name="DETAILNO"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindDanJiaByFlowNo">
    <sql>SELECT PRICE FROM LKEQ.EQSTOCKDETAIL WHERE FLOWNO=?</sql>
    <Pa name="FLOWNO"/>
  </Opt>

  <Opt id="GetRecipeCodeInEQOutInfo">
    <sql>SELECT IOID, RECIPECODE,RECIPEYEAR,RECIPEMONTH,RECIPELENGTH FROM LKEQ.DICTEQINOUT WHERE IOID=? AND CHOSCODE=? </sql>
    <Pa name="IOID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="GetrecipeCodeNo">
    <sql>SELECT COUNT(RECIPECODE) FROM LKEQ.EQOUTMAIN WHERE RECIPECODE LIKE  (?) </sql>
    <Pa name="RECIPECODEHelp"/>
  </Opt>

  <Opt id="GetTargetDeptIdByTargetWare">
    <sql>SELECT DEPTID FROM LKEQ.DICTEQWARE WHERE WARECODE=? AND CHOSCODE=?</sql>
    <Pa name="TARGETWARECODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <!--OUTID, IOID, WARECODE, TARGETWARECODE TARGETDEPTID, RECIPECODE, TOTALMONEY, OUTDATE, STATUS, MEMO, OPFLAG, USERID, USERNAME,
  RECDATE, SHDATE, SHUSERID, SHUSERNAME, CXDATE, CXUSERID, CXUSERNAME, CHOSCODE, INID-->
  <Opt id="ModifyOutMainInfo" key="OUTID" table="LKEQ.EQOUTMAIN" >

    <Pa name="IOID"/>
    <Pa name="WARECODE"/>
    <Pa name="TARGETWARECODE"/>
    <Pa name="TARGETDEPTID"/>
    <Pa name="RECIPECODE"/>
    <Pa name="TOTALMONEY"/>
    <Pa name="OUTDATE"/>
    <Pa name="STATUS"/>
    <Pa name="MEMO"/>
    <Pa name="OPFLAG"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="SHDATE"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="CXDATE"/>
    <Pa name="CXUSERID"/>
    <Pa name="CXUSERNAME"/>
    <Pa name="CHOSCODE"/>
    <Pa name="INID"/>
    <Pa name="OUTID" update="false" insert="true"/>
  </Opt>

  <Opt id="ModifyXiBiaoNullInfo">
    <sql>DELETE  FROM LKEQ.EQOUTDETAIL WHERE OUTID=? AND CHOSCODE=?</sql>
    <Pa name="OUTID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--detailno, outid, eqid, num, unitcode, price, money, gg, xh, cd, othermoney, totalprice, totalmoney,
    memo, txm, choscode, stockflowno, supplyid, supplyname, productdate, validdate-->
  <Opt id="ModifyOutXiBiaoInfo" key="DETAILNO" table="LKEQ.EQOUTDETAIL">
    <Pa name="OUTID"/>
    <Pa name="EQID"/>
    <Pa name="NUM"/>
    <Pa name="UNITCODE"/>
    <Pa name="PRICE"/>
    <Pa name="MONEY"/>
    <Pa name="GG"/>
    <Pa name="XH"/>
    <Pa name="CD"/>
    <Pa name="OTHERMONEY"/>
    <Pa name="TOTALPRICE"/>
    <Pa name="TOTALMONEY"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="DETAILNO" update="false" insert="true"/>
  </Opt>


  <Opt id="DelTheOtherDetailNoInfo">
    <sql>DELETE FROM LKEQ.EQOUTDETAIL WHERE  OUTID=? AND CHOSCODE=? AND DETAILNO NOT IN (?) </sql>
    <Pa name="OUTID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="LiuShuiOther"/>

  </Opt>


  <Opt id="DeleteOutDetailInfoInEdit">
    <sql>DELETE FROM LKEQ.EQOUTDETAIL WHERE DETAILNO=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="ShenHeEQOutAndDetailInfo">
    <sql>UPDATE LKEQ.EQOUTMAIN SET STATUS=?,SHDATE=?,SHUSERID=?,SHUSERNAME=? WHERE OUTID=? AND CHOSCODE=?</sql>
    <Pa name="STATUS"/>
    <Pa name="SHDATE"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="OUTID"/>
    <Pa name="CHOSCODE"/>
  </Opt>




  <!--[审核部分的]-->
  <Opt id="FindEQoutDetailInfoForSH">
    <sql>SELECT NUM AS 数量,EQID AS 设备ID,STOCKFLOWNO AS 库存流水号 FROM LKEQ.EQOUTDETAIL WHERE OUTID=?</sql>
    <Pa name="OUTID"/>
  </Opt>

  <Opt id="StockDetailSearchByLiuShuiHao">
    <sql>SELECT * FROM LKEQ.EQSTOCKDETAIL WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="GetEQIdNumGroupBy_EQDiaoBoManag">
    <sql>select EQID, sum(Num) AS 数量 from lkeq.eqoutdetail  where outid=? and CHOSCODE=?  group by eqid</sql>
  </Opt>
  <Opt id="UpdataEQStockNumInfo_EQDiaoBoManag">
    <sql>UPDATE LKEQ.EQSTOCK SET NUM=(NUM-?) WHERE WARECODE=? AND EQID=? AND CHOSCODE=? </sql>
  </Opt>




  <Opt id="UpdateInIDInOutMain">
    <sql>
      UPDATE LKEQ.EQOUTMAIN SET INID=? WHERE CHOSCODE=?  AND OUTID=?;
    </sql>
  </Opt>

  <Opt id="UpdateEQStockNum">
    <sql>UPDATE LKEQ.EQSTOCK SET NUM=(NUM-?) WHERE STOCKID=? AND CHOSCODE=?</sql>
  </Opt>

  <!--这里为一增一减-->
  <Opt id="UpdateEQStockNumForTarget" >
    <sql>UPDATE LKEQ.EQSTOCK SET NUM=(NUM+?) WHERE EQID=? AND WARECODE=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateEQStockNumForTarget_LingYong">
    <sql>UPDATE LKEQ.EQSTOCK SET NUM=(NUM+?) WHERE EQID=? AND WARECODE IS NULL AND DEPTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateEQStockDetailNum">
    <sql>UPDATE LKEQ.EQSTOCKDETAIL SET OUTNUM=(OUTNUM+?) WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateEQStockDetailNum_InBiao">
    <sql>UPDATE LKEQ.EQSTOCKDETAIL SET NUM=NUM+(?) WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>


  <Opt id="FindIOIdInEQInMain">
    <sql>SELECT IOID FROM LKEQ.DICTEQINOUT WHERE IOFLAG=0 AND OPFLAG =1 AND CHOSCODE=? AND IFUSE=1 </sql>
  </Opt>

  <Opt id="FindOPFlagInEQINMain">
    <sql>SELECT OPFLAG FROM LKEQ.DICTEQINOUT WHERE IOID=?</sql>
  </Opt>

  <Opt id="FindDPTInEQInMain">
    <sql>SELECT DEPTID FROM LKEQ.DICTEQWARE WHERE WARECODE=? AND CHOSCODE=?</sql>
  </Opt>
  <Opt id="IfHaveExistInEQStockForDiaoBo">
    <sql>SELECT STOCKID FROM LKEQ.EQSTOCK  WHERE EQID=? AND WARECODE=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="IfHaveExistInEQStock">
    <sql>SELECT STOCKID,NUM FROM LKEQ.EQSTOCK  WHERE EQID=? AND WARECODE=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="IfHaveExistInEQStock_LingYong">
    <sql>SELECT STOCKID,NUM FROM LKEQ.EQSTOCK  WHERE EQID=? AND WARECODE IS NULL AND DEPTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="FindBeforeNumInDetail">
    <sql>SELECT NUM FROM LKEQ.EQSTOCK WHERE STOCKID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="FindINIDForStockDetail">
    <sql>SELECT INID FROM LKEQ.EQOUTMAIN WHERE OUTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="SaveEQInMainInfoCX" key="INID" table="LKEQ.EQINMAIN">
    <Pa name="INID" update="false" insert="true" />
    <Pa name="IOID"/>
    <Pa name="WARECODE"/>
    <Pa name="DEPTID"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="OPFLAG"/>


    <Pa name="TOTALMONEY"/>
    <Pa name="INVOICEMONEY"/>
    <Pa name="OTHERMONEY"/>


    <Pa name="INVOICECODE"/>
    <Pa name="INVOICEDATE"/>
    <Pa name="BUYUSER"/>
    <Pa name="MEMO"/>

    <Pa name="INDATE"/>
    <Pa name="STATUS"/>
    <Pa name="CHOSCODE"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="SHDATE"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="CXDATE"/>
    <Pa name="CXUSERID"/>
    <Pa name="CXUSERNAME"/>
  </Opt>


  <Opt id="SaveEQStock" key="STOCKID" table="LKEQ.EQSTOCK">
    <Pa name="STOCKID" update="false" insert="true" />
    <Pa name="WARECODE"/>
    <Pa name="EQID"/>
    <Pa name="DEPTID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="UNITCODE"/>
    <Pa name="MEMO"/>
    <Pa name="NUM"/>
  </Opt>


  <Opt id="SaveEQStockDetail" key="FLOWNO" table="LKEQ.EQSTOCKDETAIL">
    <Pa name="FLOWNO" update="false" insert="true" />
    <Pa name="INID"/>
    <Pa name="WARECODE"/>
    <Pa name="EQID"/>
    <Pa name="DEPTID"/>
    <Pa name="STOCKID"/>
    <Pa name="NUM"/>
    <Pa name="BEFORENUM"/>
    <Pa name="UNITCODE"/>
    <Pa name="OUTNUM"/>
    <Pa name="CARDNUM"/>
    <Pa name="GG"/>
    <Pa name="XH"/>
    <Pa name="CD"/>
    <Pa name="PRICE"/>
    <Pa name="MONEY"/>
    <Pa name="OTHERMONEY"/>
    <Pa name="TOTALPRICE"/>
    <Pa name="TOTALMONEY"/>
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="MEMO"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="TXM"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="GHSUPPLYID"/>
    <Pa name="GHSUPPLYNAME"/>
    <Pa name="INDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="SaveEQInDetail" key="DETAILNO" table="LKEQ.EQINDETAIL">
    <Pa name="DETAILNO" update="false" insert="true" />
    <Pa name="INID"/>
    <Pa name="EQID"/>
    <Pa name="UNITCODE"/>
    <Pa name="GG"/>
    <Pa name="XH"/>
    <Pa name="CD"/>
    <Pa name="PRICE"/>
    <Pa name="NUM"/>
    <Pa name="MONEY"/>
    <Pa name="OTHERMONEY"/>
    <Pa name="TOTALPRICE"/>
    <Pa name="TOTALMONEY"/>
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="MEMO"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="TXM"/>
    <Pa name="STOCKFLOWNO"/>
  </Opt>
  <!--审核结束-->


  <!--冲销操作开始-->
  <Opt id="ChongXiaoChuKuStatusChange">
    <sql>UPDATE LKEQ.EQOUTMAIN SET STATUS=?,CXUSERNAME=?,CXUSERID=?,CXDATE=? WHERE OUTID=? AND CHOSCODE=?</sql>
    <Pa name="STATUS"/>
    <Pa name="CXUSERNAME"/>
    <Pa name="CXUSERID"/>
    <Pa name="CXDATE"/>
    <Pa name="OUTID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="ChongXiaoRuKuStatusChange">
    <sql>UPDATE LKEQ.EQINMAIN SET STATUS=?,CXUSERNAME=?,CXUSERID=?,CXDATE=? WHERE INID=? AND CHOSCODE=?</sql>
    <Pa name="STATUS"/>
    <Pa name="CXUSERNAME"/>
    <Pa name="CXUSERID"/>
    <Pa name="CXDATE"/>
    <Pa name="INID"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="FindINMainInfo">
    <sql>SELECT * FROM LKEQ.EQINMAIN WHERE CHOSCODE=? AND INID=?</sql>
  </Opt>


  <Opt id="FindChongXiaoYuanChuKuInfo">
    <sql>SELECT * FROM LKEQ.EQOUTMAIN WHERE CHOSCODE=? AND OUTID=?</sql>
  </Opt>

  <Opt id="FindInDetailInfo">
    <sql>SELECT * FROM LKEQ.EQINDETAIL WHERE CHOSCODE=? AND INID=?</sql>
  </Opt>


  <Opt id="JustForHelp">
    <sql>SELECT EQNAME FROM LKEQ.DICTEQ WHERE EQID=? AND CHOSCODE=?</sql>
  </Opt>
  <!--冲销操作结束-->


  <!--是否允许负库存-->
  <Opt id="FindNumAndOutNum">
    <sql>SELECT NUM,OUTNUM FROM LKEQ.EQSTOCKDETAIL WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>
  <!--好难的调拨管理结束了-->





  <!--设备领用管理开始-->
  <Opt id="LoadEQOutMainInfoLingYong">
    <sql>
      <!--SELECT a.OUTID AS 出库ID,a.IOID AS 出库方式编码,a.RECIPECODE AS 单据号,a.WARECODE AS 出库库房,a.TARGETWARECODE AS 出库目的库房,
      a.TARGETDEPTID AS 出库目的科室ID,a.TOTALMONEY AS 总金额,a.OUTDATE AS 制单时间, a.STATUS AS 状态,a.MEMO AS 备注,
      a.OPFLAG AS 操作标志, a.USERID AS 操作员ID,a.USERNAME AS 操作员姓名, a.RECDATE AS 修改时间 , a.SHDATE AS 审核日期,
      a.SHUSERID AS 审核操作员ID,a.SHUSERNAME AS 审核操作员姓名,a.CXDATE AS 冲销日期,a.CXUSERID AS 冲销操作员ID,
      a.CXUSERNAME AS 冲销操作员姓名, a.CHOSCODE AS 医疗机构编码 , a.INID AS 对应入库ID,d.IONAME AS 出库方式, b.名称 AS 出库目的科室
      FROM LKEQ.EQOUTMAIN a, HIS.科室表 b,LKEQ.DICTEQINOUT d
      WHERE  a.TARGETDEPTID=b.ID AND  a.IOID=d.IOID AND a.OPFLAG=2 AND d.IOFLAG=1 AND a.CHOSCODE=? AND a.WARECODE=? [Condition] AND a.OUTDATE&gt;? AND a.OUTDATE &lt;?-->
      <!--<sql> select * from LKEQ.EQOUTMAIN WHERE OPFLAG=2 AND CHOSCODE =? AND WARECODE=? [Condition] AND OUTDATE&gt;? AND OUTDATE &lt;? </sql>-->


      SELECT a.OUTID,a.IOID ,a.RECIPECODE,a.WARECODE ,a.TARGETWARECODE,
      a.TARGETDEPTID ,a.TOTALMONEY ,a.OUTDATE , a.STATUS ,a.MEMO,
      a.OPFLAG, a.USERID ,a.USERNAME, a.RECDATE  , a.SHDATE ,
      a.SHUSERID ,a.SHUSERNAME ,a.CXDATE ,a.CXUSERID,
      a.CXUSERNAME , a.CHOSCODE  , a.INID,d.IONAME, b.名称
      FROM LKEQ.EQOUTMAIN a, HIS.科室表 b,LKEQ.DICTEQINOUT d
      WHERE  a.TARGETDEPTID=b.ID AND  a.IOID=d.IOID AND a.OPFLAG=2  AND a.CHOSCODE=? AND a.WARECODE=? [Condition] AND a.OUTDATE&gt;? AND a.OUTDATE &lt;?
    </sql>
  </Opt>





  <Opt id="LoadEQOutDetailListLingYong">
    <sql>select * from LKEQ.EQOUTDETAIL WHERE OUTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateLingYongStatus">
    <sql>UPDATE LKEQ.EQOUTMAIN SET STATUS=? , RECDATE=? WHERE CHOSCODE=? AND OUTID=?</sql>
  </Opt>

  <Opt id="DeptidBindInLingYong">
    <sql> SELECT a.名称 AS 科室名称,a.ID AS 科室ID,级别 FROM HIS.科室表 a WHERE a.CHOSCODE=?  AND (a.ID LIKE ? OR a.名称 LIKE ? OR a.代码 LIKE ?) </sql>
  </Opt>

  <Opt id="WarecodeBindInLingYong">
    <sql>SELECT WARENAME AS 库房名称,WARECODE AS 库房编码,IFALL AS 管理所有设备 FROM LKEQ.DICTEQWARE WHERE CHOSCODE=? AND DEPTID=? AND (WARENAME LIKE ? AND WARECODE LIKE ?) </sql>
  </Opt>


  <Opt id="WareBindInLingYong_LingYongEdit">
    <sql>
      SELECT DISTINCT  a.WARENAME as 库房名称 ,a.WARECODE as 库房编码 ,b.EQID as 设备ID,c.EQNAME as 设备名称, b.NUM as 库存余量
      FROM LKEQ.DICTEQWARE a,LKEQ.EQSTOCK b,LKEQ.DICTEQ c
      WHERE a.WARECODE=b.WARECODE AND  a.IFUSE=1 AND c.EQID=b.EQID AND a.CHOSCODE=? AND(a.WARENAME LIKE ? OR  upper(a.PYCODE) like upper(?) or upper(a.WBCODE) like upper(?) OR a.WARECODE LIKE ?) ORDER BY a.WARECODE
    </sql>
  </Opt>



  <Opt id="outflagBindInLingYongEdit">
    <sql>select ioname as 出库方式 ,ioid as 出库id, ifuse as 是否使用,recipecode as 单据前缀 from lkeq.dicteqinout where choscode=? and ioflag=1 and opflag=2 and ifuse=1 AND (IOID LIKE ? OR IONAME LIKE ? ) </sql>
  </Opt>

  <Opt id="FindDeptIDName">
    <sql>select ID,名称 from his.科室表 where ID=(select Deptid from LKEQ.DICTEQWARE WHERE WARECODE=? AND CHOSCODE=?)</sql>
  </Opt>

  <Opt id="FindDeptIDNameInBuildCard">
    <sql>select ID,名称 from his.科室表 where ID in (select Deptid from LKEQ.DICTEQWARE WHERE  CHOSCODE=?)</sql>
  </Opt>


  <!--<Opt id="SelptInLingYong1">
    <sql>
      SELECT DISTINCT b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID  AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0   AND a.NUM &gt; 0 AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)
    </sql>
  </Opt>1218-->

  <Opt id="SelptInLingYong1">
    <sql>
      SELECT DISTINCT b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID  AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0   AND a.NUM &gt; 0 AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ? OR  upper(b.PYCODE) like upper(?) OR upper(b.WBCODE) like upper(?))
    </sql>
  </Opt>

  <!--<Opt id="SelptInLingYong2">
    <sql>
      --><!--SELECT DISTINCT b.EQNAME AS 设备名称,a.EQID AS 设备ID,a.NUM AS 库存,c.FLOWNO AS 库存流水号,c.UNITCODE AS 单位编码
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID AND a.Deptid=?   AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)--><!--
      SELECT  DISTINCT b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0  AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)
    </sql>
  </Opt>1128-->

  <Opt id="SelptInLingYong2">
    <sql>
      <!--SELECT DISTINCT b.EQNAME AS 设备名称,a.EQID AS 设备ID,a.NUM AS 库存,c.FLOWNO AS 库存流水号,c.UNITCODE AS 单位编码
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID AND a.Deptid=?   AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ?)-->
      SELECT  DISTINCT b.EQNAME AS 设备名称,c.FLOWNO AS 库存流水号,a.NUM AS 库存,
      (c.NUM-c.OUTNUM) AS 库存余量, c.NUM  AS 已入库数量,c.OUTNUM AS 出库数量,c.UNITCODE AS 单位编码, c.PRICE AS 单价,
      c.UNITCODE AS 单位,c.GG AS  规格, c.XH AS 型号, c.CD AS  产地, c.TXM  AS 条形码 ,
      c.PRODUCTDATE  AS 生产日期 ,c.VALIDDATE AS 有效期 ,c.SUPPLYID  AS 生产厂家ID, c.SUPPLYNAME  AS 生产厂家名称,a.EQID AS 设备ID
      FROM  LKEQ.EQSTOCK a,LKEQ.DICTEQ b,LKEQ.EQSTOCKDETAIL c
      WHERE a.EQID=b.EQID AND a.STOCKID=c.STOCKID AND a.EQID=c.EQID AND a.WARECODE=?  AND c.NUM-c.Outnum &gt;0  AND a.CHOSCODE=? AND (b.EQNAME LIKE ? OR a.EQID LIKE ? OR  upper(b.PYCODE) like upper(?) OR upper(b.WBCODE) like upper(?))
    </sql>
  </Opt>


  <Opt id="DGVInfoBindInLingYong">
    <sql>
      <!--SELECT DISTINCT a.FLOWNO AS 库存流水号 , (a.NUM-a.OUTNUM) AS 库存余量, a.NUM  AS 已入库数量,a.OUTNUM AS 出库数量,
      a.PRICE AS 单价,a.UNITCODE AS 单位,a.GG AS  规格, a.XH AS 型号, a.CD AS  产地, a.TXM  AS 条形码 ,
      a.PRODUCTDATE  AS 生产日期 ,a.VALIDDATE AS 有效期 ,a.SUPPLYID  AS 生产厂家ID, a.SUPPLYNAME  AS 生产厂家名称
      FROM LKEQ.EQSTOCKDETAIL a,LKEQ.EQSTOCK b
      WHERE a.EQID=b.EQID  AND a.STOCKID=b.STOCKID  a.WARECODE=? AND a.EQID=? AND a.NUM-a.Outnum &gt;0  AND a.CHOSCODE=? AND (a.FLOWNO LIKE ? OR SUPPLYNAME LIKE ?)-->


      SELECT a.FLOWNO AS 库存流水号 , (a.NUM-a.OUTNUM) AS 库存余量, a.NUM  AS 已入库数量,a.OUTNUM AS 出库数量,
      a.PRICE AS 单价,a.UNITCODE AS 单位,a.GG AS  规格, a.XH AS 型号, a.CD AS  产地, a.TXM  AS 条形码 ,
      a.PRODUCTDATE  AS 生产日期 ,a.VALIDDATE AS 有效期 ,a.SUPPLYID  AS 生产厂家ID, a.SUPPLYNAME  AS 生产厂家名称
      FROM LKEQ.EQSTOCKDETAIL a,LKEQ.EQSTOCK b
      WHERE a.STOCKID=b.STOCKID AND a.EQID=b.EQID AND b.WARECODE=? AND b.EQID=? AND  a.NUM-a.OUTNUM &gt;0 AND a.CHOSCODE=? AND (a.FLOWNO LIKE ? OR SUPPLYNAME LIKE ?)
    </sql>
  </Opt>


  <Opt id="GetWareCodeByDeptid">
    <sql>SELECT WARECODE FROM LKEQ.DICTEQWARE WHERE DEPTID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateStatusInLingYong">
    <sql>UPDATE LKEQ.EQOUTMAIN SET STATUS=?,SHDATE=?,SHUSERID=?,SHUSERNAME=? WHERE OUTID=? AND CHOSCODE=?</sql>
    <Pa name="STATUS"/>
    <Pa name="SHDATE"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="OUTID"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="LingYongGetOutDetail">
    <sql>SELECT * FROM LKEQ.EQOUTDETAIL WHERE CHOSCODE=? AND OUTID=?</sql>
  </Opt>

  <Opt id="GetStockNumInOutDetail">
    <sql>
      select EQID, sum(Num) AS 数量 from lkeq.eqoutdetail  where outid=? and CHOSCODE=?  group by eqid
    </sql>
  </Opt>

  <Opt id="UpdateStockNumInLingYong">
    <sql>UPDATE LKEQ.EQSTOCK SET NUM=(NUM- ?) WHERE CHOSCODE=? AND WARECODE=? AND EQID=?</sql>
  </Opt>


  <!--<Opt id="UpdateEQStockDetailNum">
    <sql>UPDATE LKEQ.EQSTOCKDETAIL SET OUTNUM=(OUTNUM+?) WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>-->



  <Opt id="FindIOIdInEQInMainLingYong">
    <sql>SELECT IOID FROM LKEQ.DICTEQINOUT WHERE IOFLAG=0 AND OPFLAG =2 AND CHOSCODE=? AND IFUSE=1 </sql>
  </Opt>

  <Opt id="GetStockNumInInDetail">
    <sql>select EQID, sum(Num) AS 数量 from lkeq.eqindetail  where inid=? and CHOSCODE=?  group by eqid</sql>
  </Opt>

  <Opt id="UpdateStockNumInLingYongForCX">
    <sql>UPDATE LKEQ.EQSTOCKDETAIL SET NUM=(NUM+?) WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>



  <Opt id="IfHaveBuildCardInLingYong">
    <sql>
      SELECT FLOWNO,DEPTID,STOCKID,EQID FROM LKEQ.EQSTOCKDETAIL WHERE CARDNUM &gt;= ? AND CHOSCODE=? AND FLOWNO=?
    </sql>
  </Opt>

  <Opt id="ChongXiaoKaPianInLingYong">
    <sql>
      <!--UPDATE LKEQ.EQCARDREC SET STATUS=7 WHERE STOCKID=? AND STOCKFLOWNO=?  AND DEPTID=?  AND CHOSCODE=? AND EQID=?-->
      UPDATE  LKEQ.EQCARDREC SET  STATUS=7
      WHERE CARDID IN ( SELECT CARDID  FROM (SELECT *  FROM LKEQ.EQCARDREC
      WHERE  STOCKID=? AND STOCKFLOWNO=?  AND DEPTID=? AND CHOSCODE=? AND EQID=? ORDER BY CARDID DESC) WHERE ROWNUM &lt;= ?)
    </sql>
  </Opt>

  <Opt id="ChongXiaoKaPianNumLingYong">
    <sql>UPDATE LKEQ.EQSTOCKDETAIL SET CARDNUM=CARDNUM-? WHERE FLOWNO=? AND CHOSCODE=?</sql>
  </Opt>
  <!--设备领用管理结束-->








  <!--设备建卡管理开始-->
  <Opt id="FindDeptidInCard">
    <sql>SELECT 名称,ID,级别,CHOSCODE AS 医疗机构编码 FROM HIS.科室表 WHERE CHOSCODE=? AND (ID LIKE ? OR 名称 LIKE ? OR 代码 LIKE ?)</sql>
  </Opt>

  <Opt id="FindEQKindInCard">
    <sql>SELECT KINDNAME,KINDCODE,SUPERCODE FROM LKEQ.DICTEQKIND WHERE CHOSCODE=?</sql>
  </Opt>

  <Opt id="FindUseStatusInCard">
    <sql>SELECT a.STATUSCODE AS STATUSCODE,a.STATUSNAME AS STATUSNAME,b.EQID AS EQID FROM LKEQ.DICTEQSTATUS a , LKEQ.DICTEQ b WHERE a.CHOSCODE=?</sql>
  </Opt>

  <Opt id="LoadCardInfo">
    <sql>SELECT * FROM LKEQ.EQCARDREC WHERE DEPTID=? AND CHOSCODE=? [Condition]</sql>
  </Opt>

  <Opt id="UpdateCardInfoStatus">
    <sql>UPDATE LKEQ.EQCARDREC SET STATUS=? ,STARTPEOPLE=?, STARTDATE=? WHERE CARDID=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateCardInfoStatusToDel">
    <sql>UPDATE LKEQ.EQCARDREC SET STATUS=? ,BFPEOPLE=?, BFDATE=? WHERE CARDID=? AND CHOSCODE=?</sql>
  </Opt>

  <!--<Opt id="BindUseStatusInCardEdit">
    <sql>SELECT STATUSNAME AS 状态名称,STATUSCODE AS 状态编码,IFUSE AS 是否使用 FROM LKEQ.DICTEQSTATUS WHERE CHOSCODE=? AND (STATUSCODE LIKE ? OR STATUSNAME LIKE ?)</sql>
  </Opt>1218-->

  <Opt id="BindUseStatusInCardEdit">
    <sql>
      SELECT STATUSNAME AS 状态名称,STATUSCODE AS 状态编码,IFUSE AS 是否使用
      FROM LKEQ.DICTEQSTATUS
      WHERE CHOSCODE=? AND (STATUSCODE LIKE ? OR STATUSNAME LIKE ? OR  upper(PYCODE) like upper(?) OR upper(WBCODE) like upper(?))
    </sql>
  </Opt>

  <Opt id="EQNameBindInCardEdit">
    <sql>SELECT EQNAME,EQID FROM LKEQ.DICTEQ WHERE CHOSCODE=?</sql>
  </Opt>

  <!--<Opt id="KuCunLiuShuiBindInCard">
    <sql>SELECT FLOWNO FROM LKEQ.EQSTOCKDETAIL WHERE CHOSCODE=?</sql>
  </Opt>-->
  <!--<Opt id="KuCunLiuShuiBindInCard">
    <sql>SELECT DISTINCT a.FLOWNO as 库存流水号,a.FLOWNO as 库存流水值, b.EQNAME AS 设备名称,a.CARDNUM AS 已建卡数,a.Num as 数量  FROM LKEQ.EQSTOCKDETAIL a, LKEQ.DICTEQ b WHERE a.EQID=b.EQID  AND a.CHOSCODE=? AND (a.FLOWNO LIKE ? OR b.EQNAME LIKE ?)</sql>
  </Opt>20131218-->
  
  <Opt id="KuCunLiuShuiBindInCard">
    <sql>
      SELECT DISTINCT a.FLOWNO as 库存流水号,a.FLOWNO as 库存流水值, b.EQNAME AS 设备名称,a.CARDNUM AS 已建卡数,a.Num as 数量
      FROM LKEQ.EQSTOCKDETAIL a, LKEQ.DICTEQ b
      WHERE a.EQID=b.EQID  AND a.CHOSCODE=? AND (a.FLOWNO LIKE ? OR b.EQNAME LIKE ?  OR  upper(b.PYCODE) like upper(?) OR upper(b.WBCODE) like upper(?))
    </sql>
  </Opt>


  <Opt id="LoadFJInfoInCardEdit">
    <sql>SELECT * FROM LKEQ.EQCARDFJREC WHERE CHOSCODE=? AND CARDID=?</sql>
  </Opt>

  <Opt id="LoadJLInfoInCardEdit">
    <sql>SELECT * FROM LKEQ.EQCARDJLREC WHERE CHOSCODE=? AND CARDID=?</sql>
  </Opt>

  <Opt id="LoadCCInfoInCardEdit">
    <sql>SELECT * FROM LKEQ.EQCARDCCREC WHERE CHOSCODE=? AND CARDID=?</sql>
  </Opt>

  <Opt id="LoadSMInfoInCardEdit">
    <sql>SELECT CARDID,EXPLAINNUM,TECHNUM,PICFILE, EXT, BOXTHING, CERTIFICATE,OTHER,USERID,USERNAME,RECDATE,CHOSCODE FROM LKEQ.EQCARDEXPLAINREC WHERE CARDID=? AND CHOSCODE=? </sql>
  </Opt>

  <Opt id="UpdateFJStatusInCard">
    <sql>UPDATE LKEQ.EQCARDFJREC SET STATUS=0 WHERE CARDID=? AND ROWNO=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateJLStatusInCard">
    <sql>UPDATE LKEQ.EQCARDJLREC SET STATUS=0 WHERE CARDID=? AND ROWNO=? AND CHOSCODE=?</sql>
  </Opt>

  <Opt id="UpdateSMPicFileInCard">
    <sql>UPDATE LKEQ.EQCARDEXPLAINREC SET PICFILE=? WHERE CARDID=? AND CHOSCODE=? </sql>
  </Opt>

  <!--<Opt id="CheckIfGZLFZJ_EQBuildCard">
    <sql>SELECT ZJTYPE FROM LKEQ.DICTEQ WHERE EQID=? AND CHOSCODE=? </sql>
  </Opt>-->


  <!--<Opt id="ReKuCunLiuShuiBindInCard11">
    <sql>SELECT FLOWNO FROM LKEQ.EQSTOCKDETAIL WHERE CHOSCODE=? AND DEPTID=?</sql>
  </Opt>  <sql>SELECT 名称,ID,级别,CHOSCODE AS 医疗机构编码 FROM HIS.科室表 WHERE CHOSCODE=? AND (ID LIKE ? OR 名称 LIKE ?)</sql>        -->

  <Opt id="ReKuCunLiuShuiBindInCard">
    <sql>
      SELECT DISTINCT a.FLOWNO as 库存流水号,a.FLOWNO as 库存流水值, b.EQNAME AS 设备名称,a.Cardnum AS 已建卡数,(a.NUM-a.OUTNUM-a.CARDNUM) AS 未建卡数,a.Num as 数量
      FROM LKEQ.EQSTOCKDETAIL a, LKEQ.DICTEQ b
      WHERE a.CHOSCODE=? AND a.DEPTID=? AND a.EQID=b.EQID AND a.NUM-a.OUTNUM-a.CARDNUM>0 AND(a.FLOWNO LIKE ? OR b.EQNAME LIKE ?)
    </sql>
  </Opt>

  <Opt id="FindStockIdInCard">
    <sql>SELECT STOCKID FROM LKEQ.EQSTOCKDETAIL WHERE CHOSCODE=? AND FLOWNO=?</sql>
  </Opt>

  <Opt id="FindEQNAMEInCard">
    <sql>SELECT EQNAME,IFJL,ZJTYPE FROM LKEQ.DICTEQ WHERE CHOSCODE=? AND EQID=?</sql>
  </Opt>
  <Opt id="AllReLoadInCard">
    <sql>SELECT * FROM LKEQ.EQSTOCKDETAIL WHERE CHOSCODE=? AND FLOWNO=? </sql>
  </Opt>


  <Opt id="FindNumAboutCard">
    <sql>SELECT NUM,OUTNUM,CARDNUM FROM LKEQ.EQSTOCKDETAIL WHERE  CHOSCODE=? AND FLOWNO=?</sql>
  </Opt>

  <Opt id="FindRowNoInFJ">
    <sql>SELECT MAX(ROWNO) FROM LKEQ.EQCARDFJREC WHERE CARDID=? AND CHOSCODE=?</sql>
    <Pa name="CARDID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindRowNoInJL">
    <sql>SELECT MAX(ROWNO) FROM LKEQ.EQCARDJLREC WHERE CARDID=? AND CHOSCODE=?</sql>
    <Pa name="CARDID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="SaveEQCardRecInfo" key="CARDID" table="LKEQ.EQCARDREC">
    <Pa name="CARDID" update="false" insert="true" />
    <Pa name="CARDCODE"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="STOCKID"/>
    <Pa name="EQID"/>
    <Pa name="EQNAME"/>
    <Pa name="COUNTRY"/>
    <Pa name="CONTRACTCODE"/>
    <Pa name="EQNUM"/>
    <Pa name="PRICE"/>
    <Pa name="YPRICE"/>
    <Pa name="FARE"/>
    <Pa name="DGDATE"/>
    <Pa name="CCDATE"/>
    <Pa name="LYPEOPLE"/>
    <Pa name="LYDATE"/>
    <Pa name="SETUPDATE"/>
    <Pa name="SETUPPEOPLE"/>
    <Pa name="CCCODE"/>
    <Pa name="STATUSCODE"/>
    <Pa name="USEYEAR"/>
    <Pa name="USEDYEAR"/>
    <Pa name="TOTALWORK"/>
    <Pa name="TOTALEDWORK"/>
    <Pa name="TOTALZJ"/>
    <Pa name="CZRATE"/>
    <Pa name="MAINUSE"/>
    <Pa name="YSREC"/>
    <Pa name="YSPEOPLE"/>
    <Pa name="QUATHING"/>
    <Pa name="FDVALUE"/>
    <Pa name="JDLEVEL"/>
    <Pa name="CHECKLEVEL"/>
    <Pa name="CHECKRANGE"/>
    <Pa name="CHECKZQ"/>
    <Pa name="DEPTID"/>
    <Pa name="BGPEOPLE"/>
    <Pa name="BFDATE"/>
    <Pa name="BFPEOPLE"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STATUS"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="STARDATE"/>
    <Pa name="STARTPEOPLE"/>
  </Opt>

  <Opt id="SaveEQCardFJInfo" key="CARDID,ROWNO" table="LKEQ.EQCARDFJREC">
    <Pa name="CARDID" update="false" insert="true" />
    <Pa name="ROWNO" update="false" insert="true"/>
    <Pa name="FJNAME"/>
    <Pa name="COUNTRY"/>
    <Pa name="GGXH"/>
    <Pa name="CCCODE"/>
    <Pa name="UNIT"/>
    <Pa name="NUM"/>
    <Pa name="PRICE"/>
    <Pa name="TOTALMONEY"/>
    <Pa name="STATUS"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>

  </Opt>


  <Opt id="SaveEQCardJLInfo" key="CARDID,ROWNO" table="LKEQ.EQCARDJLREC">
    <Pa name="CARDID" update="false" insert="true" />
    <Pa name="ROWNO" update="false" insert="true"/>
    <Pa name="REPAIRPEOPLE"/>
    <Pa name="JL"/>
    <Pa name="REPAIRTHING"/>
    <Pa name="REPAIRDATE"/>
    <Pa name="CHECKDATE"/>
    <Pa name="STATUS"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>



  <Opt id="SaveEQCardCCInfo" key="CARDID" table="LKEQ.EQCARDCCREC">
    <Pa name="CARDID" update="false" insert="true" />
    <Pa name="SUPPLY"/>
    <Pa name="CSNAME"/>
    <Pa name="BUYDATE"/>
    <Pa name="CCDATE"/>
    <Pa name="NEWOLD"/>
    <Pa name="PRICE"/>
    <Pa name="OTHER"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="SaveEQCardSMInfo" key="CARDID" table="LKEQ.EQCARDEXPLAINREC">
    <Pa name="CARDID" update="false" insert="true" />
    <Pa name="EXPLAINNUM"/>
    <Pa name="TECHNUM"/>
    <Pa name="PICFILE"/>
    <Pa name="EXT"/>
    <Pa name="BOXTHING"/>
    <Pa name="CERTIFICATE"/>
    <Pa name="OTHER"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindIfJLOrZJInfo">
    <sql>SELECT IFJL,ZJTYPE FROM LKEQ.DICTEQ WHERE EQID=? AND CHOSCODE=? </sql>
  </Opt>

  <Opt id="UpdateCardNumInCardInfo">
    <sql>UPDATE LKEQ.EQSTOCKDETAIL SET CARDNUM=(CARDNUM + ?) WHERE FLOWNO=? AND CHOSCODE=?</sql>
    <Pa name="EQNUM"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <!--设备建卡管理结束-->




  <Opt id="InsertTest">
    <sql>UPDATE LKEQ.EQCARDEXPLAINREC SET PICFILE=? WHERE CARDID=1  </sql>
  </Opt>

  <Opt id="TextRead">
    <sql>SELECT PICFILE FROM LKEQ.EQCARDEXPLAINREC WHERE CARDID=1</sql>

  </Opt>



  <!--设备使用管理-->
  <Opt id="LoadZhuBiaoInfoSelect_EQUseManag">
    <sql>select * from LKEQ.EQCARDREC WHERE  CHOSCODE =? AND DEPTID=? AND RECDATE &gt;? AND RECDATE &lt;?  [Condition] </sql>
  </Opt>

  <Opt id="LoadXiBiaoInfo_EQUseManag">
    <sql>SELECT DISTINCT a.*,b.名称  FROM  LKEQ.EQCARDUSEREC a, HIS.科室表 b WHERE a.CARDID=? AND a.Deptid=b.Id AND a.CHOSCODE=?</sql>
  </Opt>
  <!--SELECT * FROM LKEQ.EQCARDREC WHERE DEPTID=? AND CHOSCODE=? [Condition]-->
  <Opt id="DeleteEQUseInfo_EQUseManag">
    <sql>UPDATE LKEQ.EQCARDUSEREC SET STATUS=0 WHERE CHOSCODE=? AND USEID=?</sql>
  </Opt>

  <Opt id="DeptidBindInfo_EQUseManagEdit">
    <sql>SELECT 名称 , ID  FROM HIS.科室表 WHERE CHOSCODE=? AND (ID LIKE ? OR  名称 LIKE ?)</sql>
  </Opt>


  <Opt id="SaveEQCardUseInfo_UseManagEdit" key="USEID" table="LKEQ.EQCARDUSEREC">
    <Pa name="USEID" update="false" insert="true" />
    <Pa name="CARDID"/>
    <Pa name="DEPTID"/>
    <Pa name="USENUM"/>
    <Pa name="INCOME"/>
    <Pa name="USETHING"/>
    <Pa name="CLFARE"/>
    <Pa name="NHFARE"/>
    <Pa name="OTHERFARE"/>
    <Pa name="USEMAN"/>
    <Pa name="USEDATE"/>
    <Pa name="MEMO"/>
    <Pa name="STATUS"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>



  <!--设备维修管理的开始-->




  <Opt id="LoadXiBiaoInfoSelect_EQFixManag">
    <sql>
      SELECT DISTINCT a.*,b.Repairname,c.名称,(SELECT 名称 FROM HIS.科室表 WHERE ID=a.Repairdeptid) AS 维修科室名称
      FROM  LKEQ.EQCARDREPAIRREC a, LKEQ.DICTEQREPAIR b,HIS.科室表 c
      WHERE  a.DEPTID=c.ID AND a.REPAIRCODE=b.REPAIRCODE AND a.Cardid=? AND a.CHOSCODE=?

      <!--SELECT DISTINCT a.*,b.Repairname,c.名称  FROM  LKEQ.EQCARDREPAIRREC a, LKEQ.DICTEQREPAIR b,HIS.科室表 c
      WHERE  a.DEPTID=c.ID AND a.REPAIRCODE=b.REPAIRCODE AND a.Cardid=? AND a.CHOSCODE=?-->
    </sql>
  </Opt>
  <Opt id="UpdateStatusEQFix_EQFixManag">
    <sql>UPDATE LKEQ.EQCARDREPAIRREC SET STATUS=0 WHERE REPAIRID=?  AND  CHOSCODE=? </sql>
  </Opt>

  <Opt id="DeptidBindInfo_EQFixManagEdit">
    <sql>SELECT 名称 , ID,代码  FROM HIS.科室表 WHERE CHOSCODE=? AND (ID LIKE ? OR  名称 LIKE ? OR 代码 LIKE ?)</sql>
  </Opt>

  <Opt id="GetRePairCode_EQFixManagEdit">
    <sql>SELECT REPAIRNAME AS 维修类别名称, REPAIRCODE AS 维修类别编码 FROM LKEQ.DICTEQREPAIR WHERE CHOSCODE=? AND (REPAIRNAME LIKE ?  OR REPAIRCODE LIKE ?)</sql>
  </Opt>

  <Opt id="YongHuMingInfo_EQFixManagEdit">
    <sql>SELECT USERID AS 用户ID,NAME AS 用户名,所属科室 FROM HIS.用户表 WHERE CHOSCODE=?</sql>
  </Opt>


  <Opt id="SaveEQRepairInfo_EQFixManag" key="REPAIRID" table="LKEQ.EQCARDREPAIRREC">
    <Pa name="REPAIRID" update="false" insert="true" />
    <Pa name="CARDID"/>
    <Pa name="DEPTID"/>
    <Pa name="REPAIRCODE"/>
    <Pa name="FAULT"/>
    <Pa name="FAULTTHING"/>
    <Pa name="REPORTDATE"/>
    <Pa name="REPORTUSERID2"/>
    <Pa name="REPORTMAN"/>
    <Pa name="REPAIRPASS"/>
    <Pa name="REPAIRRESULT"/>
    <Pa name="CHANGEPARTS"/>
    <Pa name="REPAIRDEPTID"/>
    <Pa name="REPAIRMAN"/>
    <Pa name="REPAIRTIME"/>
    <Pa name="CLFARE"/>
    <Pa name="REPAIRFARE"/>
    <Pa name="OTHERFARE"/>
    <Pa name="REPAIRDATE"/>
    <Pa name="MEMO"/>
    <Pa name="PAYDATE"/>
    <Pa name="STATUS"/>
    <Pa name="CHOSCODE"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
  </Opt>





  <!--设备变动管理开始-->


  <Opt id="LoadXiBiaoInfoIn_EQChangeManag">
    <sql>
      SELECT  a.*, b.名称 AS 原使用科室 ,c.Statusname AS 原使用状态,
      (SELECT 名称 FROM HIS.科室表 WHERE ID=a.Usedeptid) AS 现使用科室,
      (SELECT STATUSNAME FROM LKEQ.DICTEQSTATUS WHERE STATUSCODE=a.Newstatuscode) AS 新使用状态
      FROM LKEQ.EQCARDCHANGEREC a,HIS.科室表 b,LKEQ.DICTEQSTATUS c
      WHERE a.CARDID=? AND a.CHOSCODE=? AND a.Olddeptid=b.Id AND a.Oldstatuscode=c.Statuscode
    </sql>
  </Opt>


  <Opt id="UpdateStatusInfo_EQChangeManag">
    <sql>UPDATE LKEQ.EQCARDCHANGEREC SET STATUS=? WHERE CHANGEID=? AND CHOSCODE=?</sql>
  </Opt>


  <Opt id="DeptidBindInfo_EQChangeManagEdit">
    <sql>SELECT 名称 , ID,代码  FROM HIS.科室表 WHERE CHOSCODE=? AND (ID LIKE ? OR  名称 LIKE ? OR 代码 LIKE ?)</sql>
  </Opt>

  <Opt id="UseStatusBindInfo_EQChangeManagEdit">
    <sql>SELECT STATUSNAME AS 使用状态名称, STATUSCODE AS 使用状态编码, IFUSE AS 是否使用 FROM LKEQ.DICTEQSTATUS WHERE CHOSCODE=? AND ( STATUSNAME LIKE ? OR STATUSCODE LIKE ?)</sql>
  </Opt>


  <Opt id="SaveEQChangeInfo_EQChangeManag" key="CHANGEID" table="LKEQ.EQCARDCHANGEREC">
    <Pa name="CHANGEID" update="false" insert="true" />
    <Pa name="CARDID"/>
    <Pa name="CHANGETYPE"/>
    <Pa name="OLDDEPTID"/>
    <Pa name="OLDMAN"/>
    <Pa name="USEMAN"/>
    <Pa name="USEDEPTID"/>
    <Pa name="OLDVALUE"/>
    <Pa name="NOWVALUE"/>
    <Pa name="OLDSTATUSCODE"/>
    <Pa name="NEWSTATUSCODE"/>
    <Pa name="MEMO"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="SHDATE"/>
    <Pa name="STATUS"/>
    <Pa name="CHOSCODE"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
  </Opt>

  <Opt id="UpdateInfoForDPBG_EQChangeManag">
    <sql>
      UPDATE LKEQ.EQCARDREC SET DEPTID=?  ,BGPEOPLE=?  WHERE CHOSCODE=? AND CARDID=?
    </sql>
  </Opt>

  <Opt id="UpdateInfoForYPrice_EQChangeManag">
    <sql>
      UPDATE LKEQ.EQCARDREC SET YPRICE=?  WHERE CHOSCODE=? AND CARDID=?
    </sql>
  </Opt>


  <Opt id="UpdateInfoForStatusCode_EQChangeManag">
    <sql>
      UPDATE LKEQ.EQCARDREC SET STATUSCODE=?  WHERE CHOSCODE=? AND CARDID=?
    </sql>
  </Opt>


  <Opt id="UpdateStatusForSH_EQChangeManag">
    <sql>UPDATE LKEQ.EQCARDCHANGEREC SET STATUS=?,SHUSERID=?,SHUSERNAME=?,SHDATE=? WHERE CHANGEID=? AND CHOSCODE=?</sql>
  </Opt>


  <!--设备折旧管理开始-->
  <Opt id="LoadZhuBiaoInfo_EQDepreManag">
    <sql>
      SELECT distinct a.*,b.名称,c.Datename
      FROM LKEQ.EQCARDDEPREREC a,HIS.科室表 b,LKEQ.DICTEQDATE c
      WHERE a.DEPTID=b.ID AND a.Dateid=c.Dateid  AND a.DEPTID=? AND a.CHOSCODE=? AND a.RECDATE &gt;? AND a.RECDATE &lt;? AND a.DEPRETYPE=0
    </sql>
  </Opt>

  <Opt id="UpdateStatusInfo_EQDepreciationManag">
    <sql>UPDATE LKEQ.EQCARDDEPREREC SET STATUS=? WHERE DEPREID=? AND CHOSCODE=?</sql>
  </Opt>


  <Opt id="LoadXiBiaoInfo_EQDepreManag">
    <sql>
      SELECT DISTINCT a.*,b.Eqname
      FROM LKEQ.EQCARDDEPREDETAILREC a ,LKEQ.EQCARDREC b
      WHERE a.CARDID=b.CARDID AND a.DEPREID=?  AND  a.CHOSCODE=?
    </sql>
  </Opt>

  <Opt id="FindDateNameInfo_EQDepreciationEdit">
    <sql>SELECT DATENAME AS 期间名称, DATEID AS 期间编码 FROM LKEQ.DICTEQDATE WHERE CHOSCODE=? AND (DATENAME LIKE ? OR DATEID LIKE ?)</sql>
  </Opt>

  <Opt id="DeptidTextChange_EQdepreciationEdit">
    <sql>
      SELECT CARDID ,EQNAME , TOTALWORK,TOTALEDWORK, TOTALZJ ,MEMO , CHOSCODE ,USERID, USERNAME , RECDATE
      FROM LKEQ.EQCARDREC
      WHERE DEPTID=? AND CHOSCODE=? AND EQID IN( SELECT EQID FROM LKEQ.DICTEQ WHERE ZJTYPE=4 AND CHOSCODE=? )
    </sql>
  </Opt>


  <Opt id="AddZJInfoForEdit_EQdepreciationEdit">
    <sql>
      SELECT CARDID AS 卡片ID,EQNAME AS 卡片设备, TOTALWORK AS 总工作量,TOTALEDWORK AS 累计工作量,
      TOTALZJ AS 累计折旧,MEMO AS 备注, CHOSCODE AS 医疗机构编码,USERID AS 操作员ID, USERNAME AS 操作员名称, RECDATE AS 修改时间
      FROM LKEQ.EQCARDREC
      WHERE DEPTID=? AND CHOSCODE=? AND EQID IN( SELECT EQID FROM LKEQ.DICTEQ WHERE ZJTYPE=4 AND CHOSCODE=? ) AND (CARDID LIKE ? OR EQNAME LIKE ?)
    </sql>
  </Opt>

  <Opt id="DeleteEQReciationInfo_EQDepreEdit">
    <sql>DELETE FROM LKEQ.EQCARDDEPREDETAILREC WHERE DEPREID=? AND CARDID=? AND CHOSCODE=? </sql>
  </Opt>

  <Opt id="SaveEQDepreciationInfo_EQDepreciation" key="DEPREID" table="LKEQ.EQCARDDEPREREC">
    <Pa name="DEPREID" update="false" insert="true"/>
    <Pa name="DEPTID"/>
    <Pa name="DEPRETYPE"/>
    <Pa name="DATEID"/>
    <Pa name="MEMO"/>
    <Pa name="STATUS"/>
    <Pa name="CHOSCODE"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
  </Opt>




  <Opt id="SaveEQDepreciationDetailInfo_EQDepreciation" key="DEPREID,CARDID" table="LKEQ.EQCARDDEPREDETAILREC">
    <Pa name="DEPREID" update="false" insert="true" />
    <Pa name="CARDID" update="false" insert="true" />
    <Pa name="TOTALZJ"/>
    <Pa name="MONTHZJ"/>
    <Pa name="TOTALWORK"/>
    <Pa name="MONTHWORK"/>
    <Pa name="TOTALEDWORK"/>
    <Pa name="MEMO"/>
    <Pa name="CHOSCODE"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
  </Opt>

  <Opt id="FindAllDetailInfoForUpdateData_EQDepreManag">
    <sql>SELECT CARDID,TOTALZJ,MONTHZJ,TOTALEDWORK,MONTHWORK FROM LKEQ.EQCARDDEPREDETAILREC WHERE CHOSCODE=? AND DEPREID=?</sql>
  </Opt>

  <Opt id="UpdateNumForDeleNotNull_EQDepreManag">
    <sql>UPDATE LKEQ.EQCARDREC SET TOTALZJ=TOTALZJ - ?,TOTALEDWORK=TOTALEDWORK - ? WHERE CARDID=? AND CHOSCODE=?</sql>
  </Opt>


  <Opt id="UpdateNumForAddNotNull_EQDepreManag">
    <sql>UPDATE LKEQ.EQCARDREC SET TOTALZJ=TOTALZJ + ?,TOTALEDWORK=TOTALEDWORK + ? WHERE CARDID=? AND CHOSCODE=?</sql>
  </Opt>



  <Opt id="UpdateNumForNumEdit_EQDepreEidt">
    <sql>UPDATE LKEQ.EQCARDREC SET TOTALZJ=TOTALZJ + (?) - (?),TOTALEDWORK=TOTALEDWORK + (?) - (?)  WHERE CARDID=? AND CHOSCODE=?</sql>
  </Opt>


  <Opt id="GetZJWork_EQDepreInEdit">
    <sql>SELECT TOTALZJ,TOTALEDWORK FROM LKEQ.EQCARDREC WHERE CHOSCODE=? AND CARDID=?</sql>
  </Opt>

  <!--设备月结管理开始-->


  <Opt id="GetYJFlag_EQMonthAccountManag">
    <sql>SELECT DATEID FROM LKEQ.DICTEQDATE WHERE CHOSCODE=?</sql>
  </Opt>

  <Opt id="GetYJStatus_EQMonthAccountManag">
    <sql>SELECT STATUS FROM LKEQ.EQCARDDEPREREC WHERE CHOSCODE=? AND DATEID=? AND DEPRETYPE=1</sql>
  </Opt>


  <!--无奈之举  绑定一个memo-->
  <Opt id="EQMonthAccountManag_Load">
    <sql>SELECT DATEID,DATENAME,MEMO,BEGINDATE,ENDDATE FROM LKEQ.DICTEQDATE WHERE CHOSCODE=? ORDER BY BEGINDATE </sql>
  </Opt>

  <!--<Opt id="EQMonthAccountManag_SelectChange_Load">
    <sql>
      SELECT distinct a.*,b.名称,c.Datename
      FROM LKEQ.EQCARDDEPREREC a,HIS.科室表 b,LKEQ.DICTEQDATE c
      WHERE a.DEPTID=b.ID AND a.Dateid=c.Dateid  AND a.DATEID=? AND a.CHOSCODE=? AND a.DEPRETYPE=1
    </sql>
  </Opt>-->

  <Opt id="EQMonthAccountManag_SelectChange_Load">
    <sql>
      SELECT distinct a.*,c.Datename
      FROM LKEQ.EQCARDDEPREREC a,HIS.科室表 b,LKEQ.DICTEQDATE c
      WHERE  a.Dateid=c.Dateid  AND a.DATEID=? AND a.CHOSCODE=? AND a.DEPRETYPE=1
    </sql>
  </Opt>


  <Opt id="FirstLoadXiBiaoInfo_EQMonthAccountEdit">
    <sql>
      SELECT DISTINCT a.*,b.Eqname,b.STARTDATE,b.BFDATE
      FROM LKEQ.EQCARDDEPREDETAILREC a ,LKEQ.EQCARDREC b
      WHERE a.CARDID=b.CARDID AND a.DEPREID=?  AND  a.CHOSCODE=? ORDER BY a.CARDID
    </sql>
  </Opt>


  <Opt id="ReLoadInformation_EditEQMonthAccount">
    <sql>
      SELECT DISTINCT  a.CARDID ,a.EQNAME,a.TOTALWORK,a.TOTALEDWORK, a.TOTALZJ,a.STARTDATE,a.BFDATE,
      a.CHOSCODE ,a.USERID, a.USERNAME,a.RECDATE,a.YPRICE,a.CZRATE,a.USEYEAR,b.ZJTYPE,b.ZJRATE
      FROM LKEQ.EQCARDREC a, LKEQ.DICTEQ b
      WHERE a.CHOSCODE=? AND a.EQID=b.EQID AND a.Status!=7 AND a.EQID IN( SELECT EQID FROM LKEQ.DICTEQ WHERE ZJTYPE!=4 AND CHOSCODE=? ) ORDER BY a.CARDID
    </sql>
  </Opt>







  <!--物质类别起-->
  <Opt id="ScanWZKind">
    <!--<sql>select KINDCODE,SUPERCODE,KINDNAME,CHOSCODE from LKWZ.DICTWZKIND where CHOSCODE = ? [Condition] </sql>-->
    <sql>
      <![CDATA[
      select KINDCODE,SUPERCODE,KINDNAME,PYCODE,WBCODE,IFEND,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKWZ.DICTWZKIND where CHOSCODE = ? ]]>
    </sql>
    <Pa name="choscode"/>
  </Opt>

  <Opt id="CopyWZKindInfo">
    <!--<sql>select KINDCODE,SUPERCODE,KINDNAME,CHOSCODE from LKWZ.DICTWZKIND where CHOSCODE = ? [Condition] </sql>-->
    <sql>
      select KINDCODE,SUPERCODE,KINDNAME,PYCODE,WBCODE,IFEND,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKWZ.DICTWZKIND where CHOSCODE=0
    </sql>
  </Opt>

  <Opt id="FindWZKind">
    <sql>
      select KINDCODE,SUPERCODE,KINDNAME,PYCODE,WBCODE,IFEND,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKWZ.DICTWZKIND where CHOSCODE = ? [Condition] order by KINDCODE
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="FindWZKind_Code">
    <sql>
      <![CDATA[
      select KINDCODE  from LKWZ.DICTWZKIND where SUPERCODE = ? order by KINDCODE desc]]>
    </sql>
    <Pa name="SUPERCODE"/>
  </Opt>

  <Opt id="WZKind_DelScan" sucMsg="使用过不能删除！" >
    <sql>select KINDCODE FROM LKWZ.DICTWZ WHERE  KINDCODE= ? and CHOSCODE=? </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="WZKinddel_Find" sucMsg="使用过不能删除！" >
    <sql>select IFUSE FROM LKWZ.DICTWZKIND WHERE  KINDCODE= ? and CHOSCODE=? </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="CompareWZKindCode" sucMsg="编码重复！" >
    <sql>select USERNAME FROM LKWZ.DICTWZKIND WHERE  KINDCODE= ? and CHOSCODE=? </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="CompareWZKindName" sucMsg="名称重复！" >
    <sql>select KINDNAME FROM LKWZ.DICTWZKIND WHERE  KINDNAME= ? and CHOSCODE=? </sql>
    <Pa name="KINDNAME"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="UpdataCompareWZKindName" sucMsg="名称重复！" >
    <sql>select KINDNAME FROM LKWZ.DICTWZKIND WHERE  KINDNAME= ? and CHOSCODE=? and KINDCODE !=?  </sql>
    <Pa name="KINDNAME"/>
    <Pa name="CHOSCODE"/>
    <Pa name="SELECTCODE"/>
  </Opt>
  <Opt id="CompareWZKindUpCode" sucMsg="上级编码错误！" >
    <sql>select SUPERCODE FROM LKWZ.DICTWZKIND WHERE  SUPERCODE= ? and CHOSCODE=? </sql>
    <Pa name="SUPERCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="CanStopWZKindInfo" >
    <sql>select IFEND FROM LKWZ.DICTWZKIND WHERE  KINDCODE= ? and CHOSCODE=? </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="StartorStopWZKindInfo" >
    <sql>
      UPDATE  LKWZ.DICTWZKIND SET IFUSE=? WHERE  KINDCODE= ? and CHOSCODE=?
    </sql>
    <Pa name="IFUSE"/>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="changeUpCodesIfEnd" >
    <sql>
      UPDATE  LKWZ.DICTWZKIND SET IFEND=0 WHERE  KINDCODE= ? and CHOSCODE=?
    </sql>
    <Pa name="SUPERCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="ifhavechildren" >
    <sql>select KINDCODE FROM LKWZ.DICTWZKIND WHERE  SUPERCODE= ? and CHOSCODE=? </sql>
    <Pa name="SUPERCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="changeUpCodesIsEnd" >
    <sql>
      UPDATE  LKWZ.DICTWZKIND SET IFEND=1 WHERE  KINDCODE= ? and CHOSCODE=?
    </sql>
    <Pa name="SUPERCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="WZKindUpdata" >
    <sql>
      UPDATE  LKWZ.DICTWZKIND SET IFUSE=? ,KINDNAME=? ,PYCODE=? ,USERNAME=? ,RECDATE=? ,USERID=? ,MEMO=? ,WBCODE=?  ,IFEND=? ,SUPERCODE=? ,KINDCODE=? WHERE CHOSCODE = ? and KINDCODE=?
    </sql>
    <Pa name="IFUSE"/>
    <Pa name="KINDNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="USERID"/>
    <Pa name="MEMO"/>
    <Pa name="WBCODE"/>
    <Pa name="IFEND"/>
    <Pa name="SUPERCODE"/>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="SELECTCODE"/>
  </Opt>
  <Opt id="WZKinddel" sucMsg="成功删除物资信息！" >
    <sql>DELETE FROM LKWZ.DICTWZKIND WHERE  KINDCODE= ? and CHOSCODE=? </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="WZKindSave" key="KINDNAME,CHOSCODE" table="LKWZ.DICTWZKIND">
    <Pa name="KINDNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="USERNAME"/>
    <Pa name="IFUSE"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE" fkey="true"/>
    <Pa name="USERID"/>
    <Pa name="MEMO"/>
    <Pa name="WBCODE"/>
    <Pa name="IFEND"/>
    <Pa name="SUPERCODE"/>
    <Pa name="KINDCODE"/>
  </Opt>
  <!--物质类别止-->
  <!--`````````````````````````````````````````````````````````````````````````````````````````````-->

  <!--厂商管理始-->
  <Opt id="WZSupply_Scan">
    <sql>
      <![CDATA[
      select SUPPLYID,SUPPLYNAME,PYCODE,WBCODE,QYDM,FRDB,UNITPROPERTY,UNITBANK,BANKACCOUNT,ADDRESS,RELMAN,RELPHONE,POST,FAX,JYXKZ,YYZZ,IFFACTORY,IFSUPPLY,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKWZ.DICTWZSUPPLY where CHOSCODE=0 or CHOSCODE = ? ]]>
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindHisInfoDict">
    <sql>
      select DICID,DICDESC from his.字典表 where DICGRPID =302
    </sql>
  </Opt>

  <Opt id="SaveChangShangInfo" key="SUPPLYID" table="LKWZ.DICTWZSUPPLY">
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="WBCODE"/>
    <Pa name="QYDM"/>
    <Pa name="FRDB" />
    <Pa name="UNITPROPERTY"/>
    <Pa name="UNITBANK"/>
    <Pa name="BANKACCOUNT"/>
    <Pa name="ADDRESS"/>
    <Pa name="RELMAN"/>
    <Pa name="RELPHONE"/>
    <Pa name="POST"/>
    <Pa name="FAX"/>
    <Pa name="JYXKZ"/>
    <Pa name="YYZZ"/>
    <Pa name="IFFACTORY"/>
    <Pa name="IFSUPPLY"/>
    <Pa name="IFUSE"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="UpdataChangShangInfo" >
    <sql>
      UPDATE  LKWZ.DICTWZSUPPLY SET SUPPLYNAME=? ,PYCODE=? ,WBCODE=? ,QYDM=? ,FRDB=? ,UNITPROPERTY=? ,UNITBANK=?  ,BANKACCOUNT=? ,ADDRESS=? ,RELMAN=? ,RELPHONE=? ,POST=? ,FAX=? ,JYXKZ=?,YYZZ=? ,IFFACTORY=? ,IFSUPPLY=? ,IFUSE=? ,MEMO=? ,USERID=? ,USERNAME=? ,RECDATE=?  WHERE CHOSCODE = ? and SUPPLYID= ?
    </sql>

    <Pa name="SUPPLYNAME"/>
    <Pa name="PYCODE"/>
    <Pa name="WBCODE"/>
    <Pa name="QYDM"/>
    <Pa name="FRDB" />
    <Pa name="UNITPROPERTY"/>
    <Pa name="UNITBANK"/>
    <Pa name="BANKACCOUNT"/>
    <Pa name="ADDRESS"/>
    <Pa name="RELMAN"/>
    <Pa name="RELPHONE"/>
    <Pa name="POST"/>
    <Pa name="FAX"/>
    <Pa name="JYXKZ"/>
    <Pa name="YYZZ"/>
    <Pa name="IFFACTORY"/>
    <Pa name="IFSUPPLY"/>
    <Pa name="IFUSE"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="SUPPLYID"/>
  </Opt>

  <Opt id="SaveChangShangInfo_Name" sucMsg="名称重复！" >
    <sql>select SUPPLYNAME FROM LKWZ.DICTWZSUPPLY WHERE  SUPPLYNAME= ? and CHOSCODE=?  </sql>
    <Pa name="SUPPLYNAME"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="UpdataChangShangInfo_Name" sucMsg="名称重复！" >
    <sql>select SUPPLYNAME FROM LKWZ.DICTWZSUPPLY WHERE  SUPPLYNAME= ? and CHOSCODE=? and SUPPLYID !=?  </sql>
    <Pa name="SUPPLYNAME"/>
    <Pa name="CHOSCODE"/>
    <Pa name="SUPPLYID"/>
  </Opt>

  <Opt id="DelChangShangInfo_Use1" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select SUPPLYID FROM LKWZ.WZINMAIN WHERE  SUPPLYID= ? and CHOSCODE=? </sql>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="DelChangShangInfo_Use2" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select SUPPLYID FROM LKWZ.WZINDETAIL WHERE  SUPPLYID= ? and CHOSCODE=? </sql>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="DelChangShangInfo_Use3" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select SUPPLYID FROM LKWZ.DICTWZDETAIL WHERE  SUPPLYID= ? and CHOSCODE=? </sql>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="DelChangShangInfo_Use4" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select SUPPLYID FROM LKWZ.WZSTOCKDETAIL WHERE  SUPPLYID= ? and CHOSCODE=? </sql>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>




  <Opt id="IfChoscodeIsZero">
    <sql>select SUPPLYID FROM LKWZ.DICTWZSUPPLY WHERE  SUPPLYID= ? and CHOSCODE=0 </sql>
    <Pa name="SUPPLYID"/>
  </Opt>

  <Opt id="DelChangShangInfo" sucMsg="成功删除厂商信息！" >
    <sql>DELETE FROM LKWZ.DICTWZSUPPLY WHERE  SUPPLYID= ? and CHOSCODE=? </sql>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindChangShangInfo">
    <sql>
      select SUPPLYID,SUPPLYNAME,PYCODE,WBCODE,QYDM,FRDB,UNITPROPERTY,UNITBANK,BANKACCOUNT,ADDRESS,RELMAN,RELPHONE,POST,FAX,JYXKZ,YYZZ,IFFACTORY,IFSUPPLY,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKWZ.DICTWZSUPPLY  where CHOSCODE = 0 or CHOSCODE=? [Condition] order by SUPPLYID
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="StartOrStopChangShangInfo" >
    <sql>
      UPDATE  LKWZ.DICTWZSUPPLY SET IFUSE=? WHERE  SUPPLYID= ? and CHOSCODE=?
    </sql>
    <Pa name="IFUSE"/>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FilterWZSupplyInfo">
    <sql>
      <![CDATA[
      select SUPPLYID,SUPPLYNAME,PYCODE,WBCODE,QYDM,FRDB,UNITPROPERTY,UNITBANK,BANKACCOUNT,ADDRESS,RELMAN,RELPHONE,POST,FAX,JYXKZ,YYZZ,IFFACTORY,IFSUPPLY,IFUSE,MEMO,USERID,USERNAME,RECDATE,CHOSCODE from LKWZ.DICTWZSUPPLY where CHOSCODE=0 or CHOSCODE = ? and IFFACTORY=? and IFSUPPLY=? ]]>
    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="IFFACTORY"/>
    <Pa name="IFSUPPLY"/>
  </Opt>

  <!--厂商管理止-->

  <!--`````````````````````````````````````````````````````````````````````````````````````````````-->

  <!--物资字典管理始-->


  <Opt id="ScanWZDict">
    <sql>
      <![CDATA[
      select a.WZID, a.WZNAME ,a.KINDCODE ,a.COUNTCODE ,a.UNITCODE ,a.LSUNITCODE ,a.PRICE  ,a.CHANGERATE,a.LOWNUM ,a.HIGHNUM ,a.RATE ,a.IFNY ,a.IFUSE ,a.USERID,a.USERNAME ,a.RECDATE ,a.FARECODE ,a.PYCODE ,a.WBCODE ,a.SHORTNAME ,a.SHORTCODE ,a.ALIASNAME,a.ALIASCODE,a.GG ,a.VALIDE,a.TXM ,a.MEMO,a.CHOSCODE,b.KINDNAME FROM  LKWZ.DICTWZ  a  left join  LKWZ.DICTWZKIND b on a.KINDCODE=b.KINDCODE WHERE a.KINDCODE=? and b.CHOSCODE = ?  ]]>
    </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="FistScanWZDict">
    <sql>
      <![CDATA[
    select a.WZID, a.WZNAME ,a.KINDCODE ,a.COUNTCODE ,a.UNITCODE ,a.LSUNITCODE ,a.PRICE  ,a.CHANGERATE,a.LOWNUM ,a.HIGHNUM ,a.RATE ,a.IFNY ,a.IFUSE ,a.USERID,a.USERNAME ,a.RECDATE ,a.FARECODE ,a.PYCODE ,a.WBCODE ,a.SHORTNAME ,a.SHORTCODE ,a.ALIASNAME,a.ALIASCODE,a.GG ,a.VALIDE,a.TXM ,a.MEMO,a.CHOSCODE,b.KINDNAME FROM  LKWZ.DICTWZ  a  left join  LKWZ.DICTWZKIND b on a.KINDCODE=b.KINDCODE WHERE a.KINDCODE = ? and b.CHOSCODE = ?  ]]>
    </sql>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="FindWZDict">
    <sql>
      select a.WZID, a.WZNAME ,a.KINDCODE ,a.COUNTCODE ,a.UNITCODE ,a.LSUNITCODE ,a.PRICE  ,a.CHANGERATE,a.LOWNUM ,a.HIGHNUM ,a.RATE ,a.IFNY ,a.IFUSE ,a.USERID,a.USERNAME ,a.RECDATE ,a.FARECODE ,a.PYCODE ,a.WBCODE ,a.SHORTNAME ,a.SHORTCODE ,a.ALIASNAME,a.ALIASCODE,a.GG ,a.VALIDE,a.TXM ,a.MEMO,a.CHOSCODE,b.KINDNAME FROM  LKWZ.DICTWZ  a  left join  LKWZ.DICTWZKIND b on a.KINDCODE=b.KINDCODE WHERE b.CHOSCODE = ? [Condition] order by a.WZID

    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="FindHisInfoDict">
    <sql>
      select DICID,DICDESC from his.字典表 where DICGRPID =302
    </sql>
  </Opt>
  <Opt id="WZDict_KindCode">
    <sql>
      select KindCode,KINDNAME from LKWZ.DiCTWZKIND where IFEND=1 and CHOSCODE=?
      <Pa name="CHOSCODE"/>
    </sql>
  </Opt>
  <Opt id="WZDict_CountCode">
    <sql>
      select COUNTCODE,COUNTNAME from LKWZ.DICTWZCOUNTKIND where  CHOSCODE=?
      <Pa name="CHOSCODE"/>
    </sql>
  </Opt>
  <Opt id="WZDict_SingerCode">
    <sql>
      select DICID,DICDESC from his.字典表 where DICGRPID =301
    </sql>
  </Opt>
  <Opt id="WZDict_SmallestCode">
    <sql>
      select DICID,DICDESC from his.字典表 where DICGRPID =301
    </sql>
  </Opt>

  <Opt id="WZDict_SFXMBM">
    <sql>
      <![CDATA[
      select 项目编码,项目名称,拼音码 from  his.项目表 where (项目编码 like ? or 项目名称 like ? or 拼音码 like ? ) and CHOSCODE = ?
     ]]>
    </sql>
  </Opt>
  <Opt id="WZDict_SFXMBM_Valid">
    <sql>
      select 项目编码 from  his.项目表 where 项目编码= ? and CHOSCODE = ?
    </sql>
    <Pa name="SFXMBM"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--我所写的所有的有关SQL语句的查询-->
  <Opt id="SaveDictEQInfo" key="EQID" table="LKEQ.DICTEQ">
    <Pa name="EQID"/>
    <Pa name="EQNAME"/>
    <Pa name="KINDCODE"/>
    <Pa name="COUNTCODE"/>
    <Pa name="UNITCODE"/>
    <Pa name="PYCODE" />
    <Pa name="WBCODE"/>
    <Pa name="SHORTNAME"/>
    <Pa name="SHORTCODE"/>
    <Pa name="ALIASNAME"/>
    <Pa name="ALIASCODE"/>
    <Pa name="PRODUCTPLACE"/>
    <Pa name="GG"/>
    <Pa name="XH"/>
    <Pa name="WORKUNITCODE"/>
    <Pa name="IFJL"/>
    <Pa name="ZJFS"/>
    <Pa name="ZJRATE"/>
    <Pa name="TXM"/>
    <Pa name="IFUSE"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="UpdataDictEQInfo" >
    <sql>
      UPDATE  LKEQ.DICTEQ SET EQNAME=? ,KINDCODE=? ,COUNTCODE=? ,UNITCODE=? ,PYCODE=? ,WBCODE=?  ,SHORTNAME=? ,SHORTCODE=? ,ALIASNAME=? ,ALIASCODE=? ,PRODUCTPLACE=? ,GG=? ,XH=?,WORKUNITCODE=? ,IFJL=? ,ZJFS=? ,ZJRATE=? ,TXM=? ,IFUSE=? ,MEMO=? ,USERID=?,USERNAME=? ,RECDATE=?,CHOSCODE = ? WHERE CHOSCODE = ? and EQID= ?
    </sql>
    <Pa name="EQNAME"/>
    <Pa name="KINDCODE"/>
    <Pa name="COUNTCODE"/>
    <Pa name="UNITCODE"/>
    <Pa name="PYCODE" />
    <Pa name="WBCODE"/>
    <Pa name="SHORTNAME"/>
    <Pa name="SHORTCODE"/>
    <Pa name="ALIASNAME"/>
    <Pa name="ALIASCODE"/>
    <Pa name="PRODUCTPLACE"/>
    <Pa name="GG"/>
    <Pa name="XH"/>
    <Pa name="WORKUNITCODE"/>
    <Pa name="IFJL"/>
    <Pa name="ZJFS"/>
    <Pa name="ZJRATE"/>
    <Pa name="TXM"/>
    <Pa name="IFUSE"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="EQID"/>
  </Opt>

  <Opt id="SaveDictEQInfo_Name" sucMsg="名称重复！" >
    <sql>select EQNAME FROM LKEQ.DICTEQ WHERE  EQNAME= ? and CHOSCODE=?  </sql>
    <Pa name="EQNAME"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="UpdataDictEQInfo_Name" sucMsg="名称重复！" >
    <sql>select EQNAME FROM LKEQ.DICTEQ WHERE  EQNAME= ? and CHOSCODE=? and EQID !=?  </sql>
    <Pa name="EQNAME"/>
    <Pa name="CHOSCODE"/>
    <Pa name="EQID"/>
  </Opt>


  <Opt id="DelEQDictInfo" sucMsg="成功删除设备信息！" >
    <sql>DELETE FROM LKEQ.DICTEQ WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--<Opt id="DelWZDictDetailInfo" sucMsg="成功删除详细物资信息！" >
    <sql>DELETE FROM LKWZ.DICTWZDETAIL WHERE  WZID= ? and CHOSCODE=? </sql>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>
  </Opt>-->

  <Opt id="DelEQDictInfo_Use1" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQAPPLYREC   WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use2" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQCARDREC   WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use3" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQINDETAIL    WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use4" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQOUTDETAIL   WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use5" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQPDDETAIL  WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use6" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQPLANDETAIL  WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use7" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQSTOCK   WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="DelEQDictInfo_Use8" sucMsg="已使用过，只能停用不能删除！" >
    <sql>select EQID FROM LKEQ.EQSTOCKDETAIL WHERE  EQID= ? and CHOSCODE=? </sql>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="StartOrStopEQDictInfo" >
    <sql>
      UPDATE  LKEQ.DICTEQ SET IFUSE=? WHERE  EQID= ? and CHOSCODE=?
    </sql>
    <Pa name="IFUSE"/>
    <Pa name="EQID"/>
    <Pa name="CHOSCODE"/>
  </Opt>



  <Opt id="FilterWZDictInfo">
    <sql>
      <![CDATA[
        select a.WZID, a.WZNAME ,a.KINDCODE ,a.COUNTCODE ,a.UNITCODE ,a.LSUNITCODE ,a.PRICE  ,a.CHANGERATE,a.LOWNUM ,a.HIGHNUM ,a.RATE ,a.IFNY ,a.IFUSE ,a.USERID,a.USERNAME ,a.RECDATE ,a.FARECODE ,a.PYCODE ,a.WBCODE ,a.SHORTNAME ,a.SHORTCODE ,a.ALIASNAME,a.ALIASCODE,a.GG ,a.VALIDE,a.TXM ,a.MEMO,a.CHOSCODE,b.KINDNAME FROM  LKWZ.DICTWZ  a  left join  LKWZ.DICTWZKIND b on a.KINDCODE=b.KINDCODE WHERE a.KINDCODE like ? and b.CHOSCODE = ?  ]]>
    </sql>
    <Pa name="KINDCODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <!--物资字典管理细表-->


  <Opt id="SaveWZDictDetailInfo" key="WZID" table="LKWZ.DICTWZDETAIL">
    <Pa name="WZID"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="IFFACTORY"/>
    <Pa name="CHOSCODE"/>
    <Pa name="IFSUPPLY"/>
  </Opt>
  <Opt id="UpdataWZDictDetailInfo" >
    <sql>
      UPDATE  LKWZ.DICTWZDETAIL SET SUPPLYID=? ,SUPPLYNAME=? ,IFFACTORY=? ,IFSUPPLY=?   WHERE CHOSCODE = ? and WZID= ?
    </sql>

    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="IFFACTORY"/>
    <Pa name="IFSUPPLY"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WZID"/>
  </Opt>

  <Opt id="WZDictDetailInfo">
    <sql>
      <![CDATA[
      select WZID, SUPPLYID ,SUPPLYNAME ,IFFACTORY ,IFSUPPLY ,CHOSCODE  FROM  LKWZ.DICTWZDETAIL WHERE WZID=? and CHOSCODE = ?  ]]>
    </sql>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="WZDictDetial_MakeID">
    <sql>
      select SUPPLYID,SUPPLYID  from LKWZ.DICTWZSUPPLY where CHOSCODE =?
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="WZDictDetial_IfMake">
    <sql>
      select IFFACTORY  from LKWZ.DICTWZSUPPLY where CHOSCODE =?  and SUPPLYID=?
    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="SUPPLYID"/>
  </Opt>
  <Opt id="WZDictDetial_MakeName">
    <sql>
      select SUPPLYNAME  from LKWZ.DICTWZSUPPLY where CHOSCODE =?  and SUPPLYID=?
    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="SUPPLYID"/>
  </Opt>
  <Opt id="WZDictDetial_IfAfford">
    <sql>
      select IFSUPPLY  from LKWZ.DICTWZSUPPLY where CHOSCODE =?  and SUPPLYID=?
    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="SUPPLYID"/>
  </Opt>
  <Opt id="DelWZDictDetailInfo" sucMsg="成功删除详细物资信息！" >
    <sql>DELETE FROM LKWZ.DICTWZDETAIL WHERE  WZID= ? and CHOSCODE=? </sql>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="WZDict_SupplyID">
    <sql>
      <![CDATA[
         select SUPPLYID,SUPPLYNAME,PYCODE,WBCODE,CHOSCODE from LKWZ.DICTWZSUPPLY where (SUPPLYID like ? or SUPPLYNAME like ? or upper(PYCODE) like upper(?) or upper(WBCODE) like upper(?))  and ( CHOSCODE=? or CHOSCODE=0)
     
      ]]>
    </sql>

  </Opt>
  <Opt id="WZDict_SupplyID_Vlid">
    <sql>
      select SUPPLYID from LKWZ.DICTWZSUPPLY where SUPPLYID = ?  and ( CHOSCODE=? or CHOSCODE=0)
    </sql>
    <Pa name="SUPPLYID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--物资字典管理止-->
  <!-->>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>-->
  <!--业务管理-->
  <!-->>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>-->
  <!--物资盘点管理始-->
  <Opt id="WZPanDian_WareCode">
    <sql>
      select WARECODE,WARENAME from LKWZ.DICTWZWARE where  CHOSCODE=?
      <Pa name="CHOSCODE"/>
    </sql>
  </Opt>

  <Opt id="SaveWZPanDianInfo" key="PDID" table="LKWZ.WZPDMAIN">
    <Pa name="PDID"/>
    <Pa name="WARECODE"/>
    <Pa name="PDDATE"/>
    <Pa name="STATUS"/>
    <Pa name="MEMO"/>
    <Pa name="USERID" />
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="UpdataWZPanDianInfo" >

    <sql>
      UPDATE  LKWZ.WZPDMAIN SET WARECODE=?  ,MEMO=? ,USERID=? ,USERNAME=?   WHERE CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="WARECODE"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="CHOSCODE"/>
    <Pa name="PDID"/>
  </Opt>

  <Opt id="ScanBusinessManag_WZPanDicanZ">
    <sql>
      <![CDATA[
      select PDID, WARECODE ,PDDATE ,STATUS ,MEMO ,USERID ,USERNAME  ,RECDATE,SHDATE ,SHUSERID ,SHUSERNAME ,JZDATE ,JZUSERID ,JZUSERNAME,CHOSCODE ,INID ,OUTID FROM  LKWZ.WZPDMAIN WHERE  CHOSCODE = ?  order by PDID  desc ]]>
    </sql>

    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="DelWZPanDianInfo" sucMsg="成功删除盘点信息！" >
    <sql>
      UPDATE  LKWZ.WZPDMAIN SET STATUS=0  WHERE  PDID= ? and CHOSCODE=?
    </sql>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="DelWZPanDianDetailInfo" sucMsg="成功删除盘点详细信息！" >
    <sql>DELETE FROM LKWZ.WZPDDETAIL WHERE  PDID= ? and STOCKFLOWNO=? and CHOSCODE=? </sql>
    <Pa name="PDID"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <!--<Opt id="IfSaveOrUpdataWZPanDianDetailInfo">
    <sql>
      select PDID from LKWZ.WZPDDETAIL where  PDID=? and STOCKFLOWNO=? and CHOSCODE=?
  </sql>
      <Pa name="PDID"/>
      <Pa name="STOCKFLOWNO"/>
      <Pa name="CHOSCODE"/>
    
  </Opt>-->


  <Opt id="IfSaveOrUpdataWZPanDianDetailInfo">
    <sql>
      select YKNUM from LKWZ.WZPDDETAIL where  PDID=? and WZID=? and CHOSCODE=?
    </sql>
    <Pa name="PDID"/>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>

  </Opt>


  <Opt id="IfWZPanDianDetailHaveData">
    <sql>
      select PDID from LKWZ.WZPDDETAIL where  PDID=? and  CHOSCODE=?
      <Pa name="PDID"/>
      <Pa name="CHOSCODE"/>
    </sql>
  </Opt>

  <Opt id="WZPZ_FindWZStockDetailInfo">
    <sql>


      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.WZSTOCK c on a.STOCKID=c.STOCKID  left join    LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE
      where  a.FLOWNO=? and a.CHOSCODE=?
    </sql>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <Opt id="WZPD_ScanStockDetail">
    <sql>


      <!--select a.FLOWNO,a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,c.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID left join LKWZ.WZSTOCK c on a.WZID=c.WZID left join LKWZ.DICTWZWARE d on c.WARECODE=d.WARECODE
      where a.WARECODE=? and a.CHOSCODE = ?  order by a.FLOWNO desc-->


      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.FACTNUM,e.YKNUM  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZPDDETAIL e
      on  (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)
      where  a.FLOWNO in    ( select FLOWNO from LKWZ.WZSTOCKDETAIL a left join LKWZ.WZPDDETAIL e on
      (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)  where
      e.YKNUM is not null  and  a.CHOSCODE=? and a.WARECODE=?)

    </sql>
    <Pa name="PDID"/>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>

  </Opt>
  <Opt id="WZPD_SearchStockDetail">
    <sql>


      <!--select a.FLOWNO,a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE
      where a.WARECODE=? and a.CHOSCODE = ?  [Condition]  order by a.FLOWNO desc-->


      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE
      where a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where  a.WARECODE=? and a.CHOSCODE=? group by a.WZID)
      [Condition]  order by   a.FLOWNO desc


    </sql>
    <Pa name="PDID"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>

  </Opt>


  <Opt id="WZPD_EditStockDetail">
    <sql>
      <!--select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.FACTNUM,e.YKNUM  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZPDDETAIL e on  (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)
      where ( a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where  a.WARECODE=? and a.CHOSCODE=? group by a.WZID)  or e.YKNUM is not null )
      [Condition]  order by   a.FLOWNO desc-->

      <!--where ( a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where a.CHOSCODE=?  and  a.WARECODE=?
      and a.WZID not in (  select  a.WZID from   LKWZ.WZSTOCKDETAIL a left join LKWZ.WZPDDETAIL e on
      (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)  where e.YKNUM is not null) group by a.WZID)  or
      a.FLOWNO in( select  STOCKFLOWNO from LKWZ.WZPDDETAIL where  WZID in ( select  WZID from   LKWZ.WZPDDETAIL-->


      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.FACTNUM,e.YKNUM  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZPDDETAIL e
      on  (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)

      where  ( a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where a.CHOSCODE=?  and a.WARECODE=?
      and a.WZID not in (  select  a.WZID from   LKWZ.WZSTOCKDETAIL a left join LKWZ.WZPDDETAIL e on
      (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)  where e.YKNUM is not null) group by a.WZID)  or
      a.FLOWNO in   ( select a.FLOWNO from LKWZ.WZSTOCKDETAIL a left join LKWZ.WZPDDETAIL e on
      (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)  where
      e.YKNUM is not null  and  a.CHOSCODE=? and a.WARECODE=?))

      [Condition] order by  a.FLOWNO desc

    </sql>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="PDID"/>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>

  </Opt>
  <Opt id="SaveWZPanDianDetailInfo" key="PDID, STOCKFLOWNO" table="LKWZ.WZPDDETAIL">
    <Pa name="PDID"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="STOCKID"/>
    <Pa name="WZID"/>
    <Pa name="STOCKNUM"/>
    <Pa name="FACTNUM" />
    <Pa name="YKNUM"/>
    <Pa name="LSUNITCODE"/>
    <Pa name="PRICE"/>

    <Pa name="LSPRICE"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME" />
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>

    <Pa name="INDATE"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="SUPPLYID2" />
    <Pa name="SUPPLYNAME2"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="WYWZPanDianDetailInfo">
    <sql>
      select PDID FROM  LKWZ.WZPDDETAIL WHERE PDID=? and STOCKFLOWNO=? and CHOSCODE = ?

    </sql>
    <Pa name="PDID"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="FindWZPandianMainInfo">
    <sql>
      select PDID, WARECODE ,PDDATE ,STATUS ,MEMO ,USERID ,USERNAME  ,RECDATE,SHDATE ,SHUSERID ,SHUSERNAME ,JZDATE ,JZUSERID ,JZUSERNAME,CHOSCODE ,INID ,OUTID FROM  LKWZ.WZPDMAIN WHERE CHOSCODE = ?  [Condition] order by PDID desc

    </sql>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="WZPanDianDetailInfo">
    <sql>
      select PDID, STOCKFLOWNO ,STOCKID ,WZID ,STOCKNUM ,FACTNUM ,YKNUM  ,LSUNITCODE,PRICE ,LSPRICE ,PH ,PZWH ,SUPPLYID ,SUPPLYNAME,PRODUCTDATE ,VALIDDATE ,WSXKZH,INDATE,MEMO,TXM,RECIPECODE,SHDH,SUPPLYID2,SUPPLYNAME2,CHOSCODE,INDETAILNO,OUTDETAILNO FROM  LKWZ.WZPDDETAIL WHERE PDID=? and CHOSCODE = ?  order by STOCKFLOWNO desc

    </sql>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="ShenHeWZPanDianInfo" >
    <sql>
      UPDATE  LKWZ.WZPDMAIN SET STATUS=?  ,SHUSERID=?  ,SHUSERNAME=? ,SHDATE=? WHERE CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="STATUS"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="SHDATE"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>

  </Opt>
  <Opt id="UpdataeWZPanDicanDetailInfo" >
    <sql>
      UPDATE  LKWZ.WZPDDETAIL SET FACTNUM=?  ,YKNUM=?   WHERE CHOSCODE = ? and PDID= ? and STOCKFLOWNO=?
    </sql>

    <Pa name="FACTNUM"/>
    <Pa name="YKNUM"/>
    <Pa name="CHOSCODE"/>
    <Pa name="PDID"/>
    <Pa name="STOCKFLOWNO"/>
  </Opt>
  <Opt id="CancelShenHeWZPanDianInfo" >
    <sql>
      UPDATE  LKWZ.WZPDMAIN SET STATUS=?  ,SHUSERID=?  ,SHUSERNAME=? ,SHDATE=? WHERE CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="STATUS"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="SHDATE"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>

  </Opt>
  <Opt id="JieZhuangWZPanDianInfo" >
    <sql>
      UPDATE  LKWZ.WZPDMAIN SET STATUS=?  ,JZUSERID=?  ,JZUSERNAME=? ,JZDATE=? WHERE CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="STATUS"/>
    <Pa name="JZUSERID"/>
    <Pa name="JZUSERNAME"/>
    <Pa name="JZDATE"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>
  </Opt>

  <Opt id="UpdataInDetailWZPanDianInfo_In" >
    <sql>
      UPDATE  LKWZ.WZPDDETAIL SET INDETAILNO=?  WHERE STOCKFLOWNO=? and CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="DETAILNO"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>
  </Opt>

  <Opt id="UpdataInDetailWZPanDianInfo_Out" >
    <sql>
      UPDATE  LKWZ.WZPDDETAIL SET OUTDETAILNO=?  WHERE STOCKFLOWNO=? and CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="DETAILNO"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>
  </Opt>

  <Opt id="UpdataInWZPanDianInfo_In" >
    <sql>
      UPDATE  LKWZ.WZPDMAIN SET INID=?  WHERE  CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="INID"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>
  </Opt>


  <Opt id="UpdataInWZPanDianInfo_Out" >
    <sql>
      UPDATE  LKWZ.WZPDMAIN SET OUTID=?  WHERE  CHOSCODE = ? and PDID= ?
    </sql>

    <Pa name="OUTID"/>
    <Pa name="CHOSCODE" />
    <Pa name="PDID"/>
  </Opt>



  <Opt id="IfHavePriceOrLsPrice">
    <sql>
      select STOCKFLOWNO,LSUNITCODE,PRICE  FROM  LKWZ.WZSTOCKDETAIL WHERE PDID=? and CHOSCODE = ?  order by STOCKFLOWNO desc

    </sql>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>

  </Opt>



  <Opt id="GetIOIDWZPanDianInfoStockIn">
    <sql>
      select SYSVALUE FROM his.系统参数 WHERE ID=2105
    </sql>
  </Opt>
  <Opt id="GetPDIDWZPanDianInfoStockIn">
    <sql>
      <![CDATA[
     select PDID, STOCKFLOWNO ,STOCKID ,WZID ,STOCKNUM ,FACTNUM ,YKNUM  ,LSUNITCODE,PRICE ,LSPRICE ,PH ,PZWH ,SUPPLYID ,SUPPLYNAME,PRODUCTDATE ,VALIDDATE ,WSXKZH,INDATE,MEMO,TXM,RECIPECODE,SHDH,SUPPLYID2,SUPPLYNAME2,CHOSCODE,INDETAILNO,OUTDETAILNO FROM  LKWZ.WZPDDETAIL WHERE YKNUM > 0 and  PDID=? and CHOSCODE = ?  order by STOCKFLOWNO desc
        ]]>
    </sql>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="SaveWzInMainWZPanDianIn" key="INID" table="LKWZ.WZINMAIN">
    <Pa name="INID" update="false"/>
    <Pa name="IOID"/>
    <Pa name="WARECODE"/>
    <Pa name="RECIPECODE"/>

    <Pa name="TOTALMONEY"/>
    <Pa name="LSTOTALMONEY"/>
    <Pa name="INDATE"/>
    <Pa name="STATUS"/>
    <Pa name="OPFLAG"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="SaveWzInDetailWZPanDianIn" key="DETAILNO" table="LKWZ.WZINDETAIL">
    <Pa name="DETAILNO" update="false"/>
    <Pa name="INID" />
    <Pa name="WZID"/>
    <Pa name="UNITCODE"/>
    <Pa name="NUM"/>
    <Pa name="PRICE"/>
    <Pa name="MONEY"/>
    <Pa name="LSPRICE"/>
    <Pa name="LSMONEY"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="SUPPLYID"/>
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STOCKFLOWNO"/>
  </Opt>
  <Opt id="iflsunitcodeInStockWZPanDianIn">
    <sql>
      select NUM FROM LKWZ.WZSTOCK WHERE WZID=? and CHOSCODE=? and WARECODE=?
    </sql>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
  </Opt>
  <Opt id="iflsunitcodeInWZDictWZPanDianIn">
    <sql>
      select LSUNITCODE FROM LKWZ.DICTWZ WHERE WZID=?
    </sql>
    <Pa name="WZID"/>
  </Opt>
  <Opt id="HsxsInWZDictWZPanDianIn">
    <sql>
      select CHANGERATE FROM LKWZ.DICTWZ WHERE WZID=?
    </sql>
    <Pa name="WZID"/>
  </Opt>
  <Opt id="IfExistInStockWZPanDianIn">
    <sql>
      select STOCKID FROM LKWZ.WZSTOCK WHERE WZID=? and CHOSCODE=? and WARECODE=?
    </sql>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
  </Opt>

  <Opt id="SaveInStockWZPanDianIn" key="STOCKID" table="LKWZ.WZSTOCK">
    <Pa name="STOCKID" update="false"/>
    <Pa name="WARECODE" />
    <Pa name="WZID"/>
    <Pa name="NUM"/>
    <Pa name="LSUNITCODE"/>
    <Pa name="MEMO"/>
    <Pa name="CHOSCODE"/>

  </Opt>
  <Opt id="UpdataInStockWZPanDianIn" >
    <sql>
      UPDATE  LKWZ.WZSTOCK SET NUM=?  WHERE CHOSCODE = ? and STOCKID= ?
    </sql>
    <Pa name="NUM"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STOCKID"/>
  </Opt>
  <Opt id="SaveInStockDetailWZPanDianIn" key="FLOWNO" table="LKWZ.WZSTOCKDETAIL">
    <Pa name="FLOWNO"/>
    <Pa name="INID"/>
    <Pa name="STOCKID"/>
    <Pa name="WZID"/>
    <Pa name="NUM"/>
    <Pa name="WARECODE"/>

    <Pa name="BEFORENUM" />
    <Pa name="CHANGERATE"/>
    <Pa name="OUTNUM"/>
    <Pa name="LSUNITCODE"/>
    <Pa name="PRICE"/>
    <Pa name="LSPRICE"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME" />
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>
    <Pa name="INDATE"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="SUPPLYID2" />
    <Pa name="SUPPLYNAME2"/>
    <Pa name="CHOSCODE"/>


  </Opt>
  <Opt id="GetIOIDWZPanDianInfoStockOut">
    <sql>
      select SYSVALUE FROM his.系统参数 WHERE ID=2106
    </sql>
  </Opt>
  <Opt id="GetPDIDWZPanDianInfoOut">
    <sql>
      <![CDATA[
     select PDID, STOCKFLOWNO ,STOCKID ,WZID ,STOCKNUM ,FACTNUM ,YKNUM  ,LSUNITCODE,PRICE ,LSPRICE ,PH ,PZWH ,SUPPLYID ,SUPPLYNAME,PRODUCTDATE ,VALIDDATE ,WSXKZH,INDATE,MEMO,TXM,RECIPECODE,SHDH,SUPPLYID2,SUPPLYNAME2,CHOSCODE,INDETAILNO,OUTDETAILNO FROM  LKWZ.WZPDDETAIL WHERE YKNUM < 0 and  PDID=? and CHOSCODE = ?  order by STOCKFLOWNO desc
        ]]>

    </sql>
    <Pa name="PDID"/>
    <Pa name="CHOSCODE"/>

  </Opt>
  <Opt id="StockDetailInfoWZPanDianOut">
    <sql>

      select FLOWNO, INID ,WARECODE ,WZID ,STOCKID ,NUM ,BEFORENUM  ,LSUNITCODE,CHANGERATE,OUTNUM,PRICE ,LSPRICE ,PH ,PZWH ,SUPPLYID ,SUPPLYNAME,PRODUCTDATE ,VALIDDATE ,WSXKZH,INDATE,MEMO,TXM,RECIPECODE,SHDH,SUPPLYID2,SUPPLYNAME2,CHOSCODE FROM  LKWZ.WZSTOCKDETAIL WHERE   WARECODE=? and CHOSCODE = ?  and STOCKID = ?  and WZID = ?

    </sql>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STOCKID"/>
    <Pa name="WZID"/>

  </Opt>

  <Opt id="SaveWzOutMainWZPanDianOut" key="OUTID" table="LKWZ.WZOUTMAIN">
    <Pa name="OUTID" update="false"/>
    <Pa name="IOID"/>
    <Pa name="WARECODE"/>
    <Pa name="RECIPECODE"/>
    <Pa name="TOTALMONEY"/>
    <Pa name="LSTOTALMONEY"/>
    <Pa name="OUTDATE"/>
    <Pa name="STATUS"/>
    <Pa name="OPFLAG"/>
    <Pa name="MEMO"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="SaveWzOutDetailWZPanDianOut" key="DETAILNO" table="LKWZ.WZOUTDETAIL">
    <Pa name="DETAILNO" update="false"/>
    <Pa name="OUTID" />
    <Pa name="WZID"/>
    <Pa name="UNITCODE"/>
    <Pa name="NUM"/>
    <Pa name="PRICE"/>
    <Pa name="MONEY"/>
    <Pa name="INPRICE"/>
    <Pa name="INMONEY"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="SUPPLYNAME"/>
    <Pa name="SUPPLYID"/>
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STOCKFLOWNO"/>
  </Opt>

  <!--物资盘点管理止-->

  <!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

  <!--物资使用登记始-->



  <Opt id="WZUseRec_Stock">
    <sql>
      select WARECODE,WARENAME  from LKWZ.DICTWZWARE where  CHOSCODE =?
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="WZUseRec2_Stock">
    <sql>
      select WARECODE,WARENAME  from LKWZ.DICTWZWARE where IFRDWARE=1 and CHOSCODE =?
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="ScanWZUseRec">
    <sql>
      <![CDATA[
      select USENO, STOCKFLOWNO ,STOCKID ,WZID ,WZNAME ,WARECODE ,SICKCODE  ,SICKNAME,USENUM ,LSUNITCODE ,USEDATE ,SENDDEPTID ,RECVDEPTID ,PRICE,LSPRICE ,PH ,PZWH,SUPPLYID,SUPPLYNAME ,PRODUCTDATE ,VALIDDATE ,WSXKZH ,INDATE ,MEMO 
      ,TXM ,RECIPECODE ,SHDH ,SUPPLYID2 ,SUPPLYNAME2 ,CHOSCODE  ,STATUS ,USERID ,USERNAME ,RECDATE FROM  LKWZ.WZUSEREC WHERE  CHOSCODE = ?  order by USENO desc ]]>
    </sql>

    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="WZUseRec_ScanStockDetail">
    <sql>

      <!--select a.FLOWNO,a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,c.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID left join LKWZ.WZSTOCK c on a.WZID=c.WZID left join LKWZ.DICTWZWARE d on c.WARECODE=d.WARECODE
      where  a.cHosCode = ?  [Condition] order by a.FLOWNO desc-->

      select a.FLOWNO,e.USENO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZUSEREC e
      on  (a.FLOWNO= e.STOCKFLOWNO and e.SICKCODE=? )

      where a.FLOWNO in( select  STOCKFLOWNO from   LKWZ.WZUSEREC  where CHOSCODE=? and WARECODE=?  )
      order by  a.FLOWNO desc
    </sql>
    <Pa name="SICKCODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>

  </Opt>
  <Opt id="WZUseRec_SearchStockDetail">
    <sql>

      <!--select a.FLOWNO,a.WZID,b.WZNAME, c.NUM  ,a.WARECODE,a.STOCKID,a.BEFORENUM,a.STOCKID,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID left join LKWZ.WZSTOCK c on a.WZID=c.WZID left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE
      where  a.cHosCode = ? and c.WARECODE=?  [Condition] order by a.FLOWNO desc-->

      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE
      where a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where  a.CHOSCODE=?  and  a.WARECODE=? group by a.WZID)
      [Condition]  order by   a.FLOWNO desc
    </sql>

    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>

  </Opt>

  <Opt id="WZUseRec_EditStockDetail">
    <sql>

      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.USENO,e.USENUM,e.SENDDEPTID,e.RECVDEPTID,e.USEDATE,f.名称 as SendName,g.名称
      as ReciName from LKWZ.WZSTOCKDETAIL a left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE
      left join LKWZ.WZUSEREC e  on  (a.FLOWNO= e.STOCKFLOWNO and e.SICKCODE=? and e.STATUS='1' )  left join HIS.科室表 f on f.ID=e.SENDDEPTID
      left join  HIS.科室表 g on g.ID=e.RECVDEPTID

      where ( a.FLOWNO in ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where a.CHOSCODE=? and a.WARECODE=?
      and a.WZID not in (  select  WZID from   LKWZ.WZUSEREC
      where CHOSCODE=? and WARECODE=?  ) group by a.WZID ) or a.FLOWNO in( select  STOCKFLOWNO from LKWZ.WZUSEREC
      where  WZID in ( select  WZID from   LKWZ.WZUSEREC
      where CHOSCODE=? and WARECODE=?) and CHOSCODE=? and WARECODE=?   ) )
      order by e.USENO desc



      <!--where ( a.FLOWNO in ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where a.CHOSCODE=?  and a.WARECODE=?
      and a.WZID not in (  select  WZID from   LKWZ.WZUSEREC
      where CHOSCODE=? and WARECODE=?  ) group by a.WZID ) or a.FLOWNO in( select  STOCKFLOWNO from   LKWZ.WZUSEREC
      where CHOSCODE=? and WARECODE=?  ) ) and e.STATUS=1
      order by e.USENO desc-->
    </sql>
    <Pa name="SICKCODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
  </Opt>


  <Opt id="WZUseRec_KDKS">
    <sql>
      <![CDATA[
      select 名称 as 开单科室 ,ID as 开单科室ID  from his.科室表 where (ID like ? or 名称 like ? or 类别 like ? ) and CHOSCODE = ?
     ]]>
    </sql>
  </Opt>


  <Opt id="WZUseRec_JDKS">
    <sql>
      <![CDATA[
      select 名称 as 接单科室 ,ID as 接单科室ID  from his.科室表 where ( ID like ? or 名称 like ? or 类别 like ? )  and CHOSCODE = ?
     ]]>
    </sql>
  </Opt>
  <Opt id="WZUseRec_KDKS_Valid">
    <sql>
      select 名称,ID  from his.科室表 where ID = ?  and CHOSCODE = ?
    </sql>
    <Pa name="ID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="WZUseRec_KDKS_Valid1">
    <sql>
      select 名称,ID  from his.科室表 where 名称 = ?  and CHOSCODE = ?
    </sql>
    <Pa name="名称"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="SaveWZUseRecInfo" key="USENO" table="LKWZ.WZUSEREC">
    <Pa name="USENO"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="STOCKID"/>
    <Pa name="WZID"/>
    <Pa name="WZNAME"/>
    <Pa name="WARECODE"/>
    <Pa name="SICKCODE" />
    <Pa name="SICKNAME"/>
    <Pa name="USENUM"/>
    <Pa name="LSUNITCODE"/>
    <Pa name="USEDATE"/>
    <Pa name="SENDDEPTID"/>
    <Pa name="RECVDEPTID"/>
    <Pa name="PRICE"/>
    <Pa name="LSPRICE"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME" />
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>
    <Pa name="INDATE"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="SUPPLYID2" />
    <Pa name="SUPPLYNAME2"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STATUS"/>
    <Pa name="USERID"/>
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>

  </Opt>

  <Opt id="WZUseRec_ZYNum">
    <sql>

      select 病人姓名  from his.住院登记表 where CHOSCODE =?  and 住院号=?
    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="住院号"/>
  </Opt>

  <Opt id="UpdataWZUseRecInfo" >
    <sql>
      UPDATE  LKWZ.WZUSEREC SET USENUM=?, USEDATE=?  WHERE CHOSCODE = ? and USENO= ?
    </sql>



    <Pa name="USENUM"/>
    <Pa name="USEDATE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="USENO"/>
  </Opt>

  <Opt id="updataInfo_Use_SeachNum" >
    <sql>
      SELECT  USENUM from  LKWZ.WZUSEREC  WHERE CHOSCODE = ? and USENO= ?
    </sql>

    <Pa name="CHOSCODE"/>
    <Pa name="USENO"/>
  </Opt>




  <Opt id="ScanSelectWZUseRec">
    <sql>
      <![CDATA[
      select USENO, STOCKFLOWNO ,STOCKID ,WZID ,WZNAME ,WARECODE ,SICKCODE  ,SICKNAME,USENUM ,LSUNITCODE ,USEDATE ,SENDDEPTID ,RECVDEPTID ,PRICE,LSPRICE ,PH ,PZWH,SUPPLYID,SUPPLYNAME ,PRODUCTDATE ,VALIDDATE ,WSXKZH ,INDATE ,MEMO 
      ,TXM ,RECIPECODE ,SHDH ,SUPPLYID2 ,SUPPLYNAME2 ,CHOSCODE  ,STATUS ,USERID ,USERNAME ,RECDATE FROM  LKWZ.WZUSEREC WHERE USENO=? and CHOSCODE = ?  ]]>
    </sql>
    <Pa name="USENO"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="DeleteWZUseRecInfo" >
    <sql>
      UPDATE  LKWZ.WZUSEREC SET STATUS=0  WHERE CHOSCODE = ? and USENO= ?
    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="USENO"/>
  </Opt>

  <Opt id="FindWZUseRecInfo">
    <sql>
      select USENO, STOCKFLOWNO ,STOCKID ,WZID ,WZNAME ,WARECODE ,SICKCODE  ,SICKNAME,USENUM ,LSUNITCODE ,USEDATE ,SENDDEPTID ,RECVDEPTID ,PRICE,LSPRICE ,PH ,PZWH,SUPPLYID,SUPPLYNAME ,PRODUCTDATE ,VALIDDATE ,WSXKZH ,INDATE ,MEMO
      ,TXM ,RECIPECODE ,SHDH ,SUPPLYID2 ,SUPPLYNAME2 ,CHOSCODE  ,STATUS ,USERID ,USERNAME ,RECDATE FROM  LKWZ.WZUSEREC WHERE CHOSCODE = ?  [Condition] order by USENO desc

    </sql>
    <Pa name="CHOSCODE"/>

  </Opt>
  <Opt id="WZStockDetail_Add_Ye" key="FLOWNO" table="LKWZ.WZSTOCKDETAIL">
    <Pa name="FLOWNO"/>
    <Pa name="INID"/>
    <Pa name="STOCKID"/>
    <Pa name="WZID"/>
    <Pa name="NUM"/>
    <Pa name="WARECODE"/>

    <Pa name="BEFORENUM" />
    <Pa name="CHANGERATE"/>
    <Pa name="OUTNUM"/>
    <Pa name="LSUNITCODE"/>
    <Pa name="PRICE"/>
    <Pa name="LSPRICE"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME" />
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>
    <Pa name="INDATE"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="SUPPLYID2" />
    <Pa name="SUPPLYNAME2"/>
    <Pa name="CHOSCODE"/>


  </Opt>
  <Opt id="WZStock_Updata_Ye" >
    <sql>
      UPDATE  LKWZ.WZSTOCK  set NUM=?  where   CHOSCODE = ? and STOCKID= ?
    </sql>
    <Pa name="NUM"/>
    <Pa name="CHOSCODE"/>
    <Pa name="STOCKID"/>
  </Opt>
  <Opt id="FindNewNumofWZStockDetail" >
    <sql>
      SELECT  OUTNUM  FROM  LKWZ.WZSTOCKDETAIL  where   CHOSCODE = ? and STOCKID= ? order by OUTNUM desc
    </sql>

    <Pa name="CHOSCODE"/>
    <Pa name="STOCKID"/>

  </Opt>
  <Opt id="findWZUseOutNumInfo" >
    <sql>
      SELECT  OUTNUM  FROM  LKWZ.WZSTOCKDETAIL  where   CHOSCODE = ? and WARECODE= ? and WZID=? order by FLOWNO desc
    </sql>

    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="WZID"/>
  </Opt>


  <Opt id="findWZUseNumInfo" >
    <sql>
      SELECT  STOCKFLOWNO  FROM  LKWZ.WZUSEREC  where   CHOSCODE = ? and STOCKID= ?  order by STOCKFLOWNO desc
    </sql>

    <Pa name="CHOSCODE"/>
    <Pa name="STOCKID"/>

  </Opt>
  <Opt id="findWZUseInNumInfo" >
    <sql>
      SELECT  NUM  FROM  LKWZ.WZSTOCK  where   CHOSCODE = ? and STOCKID= ?
    </sql>

    <Pa name="CHOSCODE"/>
    <Pa name="STOCKID"/>

  </Opt>


  <Opt id="findWZUse_IfCanOut" >
    <sql>
      SELECT  SYSVALUE  FROM  HIS.系统参数  where  ID=2103 and  CHOSCODE = ?
    </sql>

    <Pa name="CHOSCODE"/>

  </Opt>

  <Opt id="IfSaveOrUpdataWZUseDetailInfo">
    <sql>
      select NEWPRICE from LKWZ.WZTJDETAIL where  TJID=? and WZID=? and CHOSCODE=?
    </sql>
    <Pa name="TJID"/>
    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <!--物资使用登记止-->

  <!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

  <!--物资调价管理始-->

  <Opt id="FindWZTiaoJiaMainInfo">
    <sql>
      select TJID, WARECODE ,TJDATE ,STATUS ,TJREASON,MEMO,USERID ,USERNAME  ,RECDATE,SHDATE ,SHUSERID ,SHUSERNAME ,SHINDATE ,SHINUSERID ,SHINUSERNAME,CHOSCODE FROM  LKWZ.WZTJMAIN WHERE CHOSCODE = ?  [Condition] order by TJID desc

    </sql>
    <Pa name="CHOSCODE"/>

  </Opt>


  <Opt id="SaveWZTiaoJiaMainInfo" key="TJID" table="LKWZ.WZTJMAIN">
    <Pa name="TJID"/>
    <Pa name="WARECODE"/>
    <Pa name="TJDATE"/>
    <Pa name="TJREASON"/>
    <Pa name="STATUS"/>
    <Pa name="MEMO"/>
    <Pa name="USERID" />
    <Pa name="USERNAME"/>
    <Pa name="RECDATE"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="UpdataWZTiaoJiaInfo" >
    <sql>
      UPDATE  LKWZ.WZTJMAIN SET WARECODE=? ,TJREASON=?  ,MEMO=?  WHERE CHOSCODE = ? and TJID= ?
    </sql>

    <Pa name="WARECODE"/>
    <Pa name="TJREASON"/>
    <Pa name="MEMO"/>
    <Pa name="CHOSCODE"/>
    <Pa name="TJID"/>
  </Opt>
  <Opt id="DelWZTiaoJiaInfo" sucMsg="成功删除调价信息！" >
    <sql>
      UPDATE  LKWZ.WZTJMAIN SET STATUS=?  WHERE CHOSCODE = ? and TJID= ?
    </sql>
    <Pa name="STATUS"/>
    <Pa name="CHOSCODE"/>
    <Pa name="TJID"/>

  </Opt>

  <Opt id="DelWZTiaoJiaDetailInfo" sucMsg="成功删除调价详细信息！" >
    <sql>DELETE FROM LKWZ.WZTJDETAIL WHERE  TJID= ? and STOCKFLOWNO=? and CHOSCODE=? </sql>
    <Pa name="TJID"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <Opt id="ShenHeWZTiaoJiaInfo" >
    <sql>
      UPDATE  LKWZ.WZTJMAIN SET STATUS=?  ,SHUSERID=?  ,SHUSERNAME=? ,SHDATE=? WHERE CHOSCODE = ? and TJID= ?
    </sql>

    <Pa name="STATUS"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="SHDATE"/>
    <Pa name="CHOSCODE" />
    <Pa name="TJID"/>

  </Opt>
  <Opt id="CancelShenHeWZTiaoJianInfo" >
    <sql>
      UPDATE  LKWZ.WZTJMAIN SET STATUS=?  ,SHUSERID=?  ,SHUSERNAME=? ,SHDATE=? WHERE CHOSCODE = ? and TJID= ?
    </sql>

    <Pa name="STATUS"/>
    <Pa name="SHUSERID"/>
    <Pa name="SHUSERNAME"/>
    <Pa name="SHDATE"/>
    <Pa name="CHOSCODE" />
    <Pa name="TJID"/>

  </Opt>
  <Opt id="SHInWZPanDianInfo" >
    <sql>
      UPDATE  LKWZ.WZTJMAIN SET STATUS=?  ,SHINUSERID=?  ,SHINUSERNAME=? ,SHINDATE=? WHERE CHOSCODE = ? and TJID= ?
    </sql>

    <Pa name="STATUS"/>
    <Pa name="SHINUSERID"/>
    <Pa name="SHINUSERNAME"/>
    <Pa name="SHINDATE"/>
    <Pa name="CHOSCODE" />
    <Pa name="TJID"/>

  </Opt>
  <Opt id="WZTiaoJia_ScanStockDetail">
    <sql>

      <!--select a.FLOWNO,a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID left join LKWZ.WZSTOCK c on a.WZID=c.WZID left join LKWZ.DICTWZWARE d on c.WARECODE=d.WARECODE
      where a.WARECODE=? and a.CHOSCODE = ?  order by a.FLOWNO desc-->




      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.NEWPRICE  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZTJDETAIL e
      on  (a.FLOWNO= e.STOCKFLOWNO and e.TJID=?)
      where  a.FLOWNO in( select  STOCKFLOWNO from LKWZ.WZTJDETAIL
      where  WZID in ( select  WZID from   LKWZ.WZTJDETAIL
      where CHOSCODE=? and WARECODE=?) and CHOSCODE=? and WARECODE=?   )

      [Condition] order by  a.FLOWNO desc

    </sql>
    <Pa name="TJID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
  </Opt>


  <Opt id="WZTiaoJia_EditStockDetail">
    <sql>
      <!--select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.FACTNUM,e.YKNUM  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZPDDETAIL e on  (a.FLOWNO= e.STOCKFLOWNO and e.PDID=?)
      where ( a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where  a.WARECODE=? and a.CHOSCODE=? group by a.WZID)  or e.YKNUM is not null )
      [Condition]  order by   a.FLOWNO desc-->
      <!--where ( a.FLOWNO in ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where a.CHOSCODE=? and a.WARECODE=?
      and a.WZID not in (  select  WZID from   LKWZ.WZUSEREC
      where CHOSCODE=? and WARECODE=?  ) group by a.WZID ) or a.FLOWNO in( select  STOCKFLOWNO from LKWZ.WZUSEREC
      where  WZID in ( select  WZID from   LKWZ.WZUSEREC
      where CHOSCODE=? and WARECODE=?) and CHOSCODE=? and WARECODE=?   ) )
      order by e.USENO desc-->


      select a.FLOWNO, a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,a.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.NEWPRICE  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID  left join LKWZ.DICTWZWARE d on a.WARECODE=d.WARECODE left join LKWZ.WZTJDETAIL e
      on  (a.FLOWNO= e.STOCKFLOWNO and e.TJID=?)

      where ( a.FLOWNO in  ( select Max(a.flowno)  from LKWZ.WZSTOCKDETAIL a where  a.CHOSCODE=?  and a.WARECODE=?
      and a.WZID not in (  select  a.WZID from   LKWZ.WZSTOCKDETAIL a left join LKWZ.WZTJDETAIL e on
      (a.FLOWNO= e.STOCKFLOWNO and e.TJID=?)  where e.NEWPRICE is not null) group by a.WZID)  or
      a.FLOWNO in( select  STOCKFLOWNO from LKWZ.WZTJDETAIL
      where  WZID in ( select  WZID from   LKWZ.WZTJDETAIL
      where CHOSCODE=? and WARECODE=?) and CHOSCODE=? and WARECODE=?   ) )

      [Condition] order by  a.FLOWNO desc

    </sql>
    <Pa name="TJID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="TJID"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
  </Opt>



  <Opt id="ScanWZTiaoJiaInfo">
    <sql>
      select TJID, WARECODE ,TJDATE ,TJREASON,STATUS ,MEMO ,USERID ,USERNAME  ,RECDATE,SHDATE ,SHUSERID ,SHUSERNAME ,SHINDATE ,SHINUSERID ,SHINUSERNAME,CHOSCODE FROM  LKWZ.WZTJMAIN WHERE CHOSCODE = ? and  WARECODE=? order by TJID desc

    </sql>
    <Pa name="CHOSCODE"/>
    <Pa name="WARECODE"/>
  </Opt>
  <Opt id="ScanWZTiaoJiaDetailInfo">
    <sql>
      select TJID, STOCKFLOWNO ,WZID ,STOCKID,NUM ,UNITCODE ,NEWPRICE ,OLDPRICE  ,PH,PZWH ,SUPPLYID ,SUPPLYNAME ,PRODUCTDATE ,VALIDDATE ,WSXKZH,MEMO,TXM,INDATE,RECIPECODE,SHDH,SUPPLYID2,SUPPLYNAME2,CHOSCODE FROM  LKWZ.WZTJDETAIL WHERE TJID = ? and  CHOSCODE=? order by TJID desc

    </sql>
    <Pa name="TJID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="SaveWZTiaoJiaDetailInfo" key="TJID, STOCKFLOWNO" table="LKWZ.WZTJDETAIL">
    <Pa name="TJID"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="WZID"/>
    <Pa name="STOCKID"/>
    <Pa name="NUM"/>
    <Pa name="UNITCODE"/>
    <Pa name="NEWPRICE" />
    <Pa name="OLDPRICE"/>
    <Pa name="PH"/>
    <Pa name="PZWH"/>
    <Pa name="SUPPLYID"/>
    <Pa name="SUPPLYNAME" />
    <Pa name="PRODUCTDATE"/>
    <Pa name="VALIDDATE"/>
    <Pa name="WSXKZH"/>
    <Pa name="INDATE"/>
    <Pa name="MEMO"/>
    <Pa name="TXM"/>
    <Pa name="RECIPECODE"/>
    <Pa name="SHDH"/>
    <Pa name="SUPPLYID2" />
    <Pa name="SUPPLYNAME2"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="UpdataeWZTiaoJiaDetailInfo" >
    <sql>
      UPDATE  LKWZ.WZTJDETAIL SET NEWPRICE=? WHERE STOCKFLOWNO=? and CHOSCODE = ? and TJID= ?
    </sql>

    <Pa name="NEWPRICE"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>
    <Pa name="TJID"/>
  </Opt>
  <Opt id="ChangPriceInWZStockDetailInfo" >
    <sql>
      UPDATE  LKWZ.WZSTOCKDETAIL SET LSPRICE=? WHERE FLOWNO=? and CHOSCODE = ?
    </sql>

    <Pa name="NEWPRICE"/>
    <Pa name="STOCKFLOWNO"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="GetWZNameInWZTiaoJiaDetail" >
    <sql>
      SELECT  WZNAME  FROM  LKWZ.DICTWZ  where   WZID = ? and CHOSCODE= ?
    </sql>

    <Pa name="WZID"/>
    <Pa name="CHOSCODE"/>

  </Opt>

  <!--物资调价管理止-->

  <!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

  <!--统计查询-->

  <!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

  <!--物资效期查询始-->
  <Opt id="FindWZKindWZXiaoQi">
    <sql>
      <![CDATA[
      select KINDNAME,KINDCODE,SUPERCODE,IFUSE  from LKWZ.DICTWZKIND where( KINDCODE like ? or KINDNAME like ? ) and CHOSCODE = ?
     ]]>
    </sql>
  </Opt>
  <Opt id="FindWZDictWZXiaoQi">
    <sql>
      <![CDATA[
      select WZNAME,WZID,SHORTNAME,ALIASNAME  from LKWZ.DICTWZ where (WZID like ? or WZNAME like ? or SHORTNAME like ? or ALIASNAME like ?  )and CHOSCODE = ?
     ]]>
    </sql>
  </Opt>
  <Opt id="WZXiaoQi_SearchStockDetail">
    <sql>

      select a.FLOWNO,a.WZID,a.INID,b.WZNAME,a.WARECODE,a.STOCKID,a.BEFORENUM,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH,c.NUM,
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE,d.WARENAME,e.KINDCODE from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID left join LKWZ.WZSTOCK c on a.WZID=c.WZID left join LKWZ.DICTWZWARE d on c.WARECODE=d.WARECODE
      left join LKWZ.DICTWZ e on a.WZID=e.WZID
      where a.WARECODE=? and a.CHOSCODE = ?  [Condition]  order by a.FLOWNO desc


    </sql>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>


  </Opt>
  <!--物资效期查询止-->

  <!--物资库存预警始-->

  <Opt id="SetWZStockAlarmStockInfo" >
    <sql>
      UPDATE  LKWZ.WZSTOCK SET NUMSX=?, NUMXX=?  WHERE STOCKID=? and CHOSCODE = ?
    </sql>

    <Pa name="NUMSX"/>
    <Pa name="NUMXX"/>
    <Pa name="STOCKID"/>
    <Pa name="CHOSCODE"/>
  </Opt>

  <!--<Opt id="WZStockAlarmStockDetailInfo">
    <sql>

      select FLOWNO, INID ,WARECODE ,WZID ,STOCKID ,NUM ,BEFORENUM  ,LSUNITCODE,CHANGERATE,OUTNUM,PRICE ,LSPRICE ,PH ,PZWH ,SUPPLYID ,SUPPLYNAME,PRODUCTDATE ,VALIDDATE ,WSXKZH,INDATE,MEMO,TXM,RECIPECODE,SHDH,SUPPLYID2,SUPPLYNAME2,CHOSCODE FROM  LKWZ.WZSTOCKDETAIL WHERE  STOCKID = ?   and  CHOSCODE = ?

    </sql>
    <Pa name="STOCKID"/>-->
  <!--<Pa name="CHOSCODE"/>-->
  <Opt id="WZStockAlarmStockDetailInfo">
    <sql>

      select c.STOCKID,c.WARECODE,c.WZID,b.WZNAME,c.FLOWNO,c.INID,c.MEMO,c.BEFORENUM,c.LSUNITCODE,c.CHANGERATE,c.OUTNUM,c.LSPRICE,c.PRICE,c.PH,c.PZWH,c.SUPPLYID,c.SUPPLYNAME,c.PRODUCTDATE,c.VALIDDATE,c.WSXKZH,c.INDATE,c.TXM,c.RECIPECODE,c.SHDH,c.SUPPLYID2,c.SUPPLYNAME2,
      c.CHOSCODE,c.NUM,d.WARENAME,e.KINDCODE from   LKWZ.WZSTOCKDETAIL c  left join LKWZ.DICTWZ b on c.WZID=b.WZID left join LKWZ.DICTWZWARE d on c.WARECODE=d.WARECODE
      left join LKWZ.DICTWZ e on c.WZID=e.WZID
      where c.STOCKID=? and c.CHOSCODE = ?  order by c.STOCKID desc
    </sql>
    <Pa name="STOCKID"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="ScanWZStockAlarmStockInfo">
    <sql>

      select a.STOCKID,  a.WARECODE , a.WZID , a.NUM , a.LSUNITCODE , a.NUMSX , a.NUMXX  , a.MEMO, a.CHOSCODE,b.WZNAME FROM  LKWZ.WZSTOCK a left join LKWZ.DICTWZ  b on a.WZID=b.WZID   WHERE  a.WARECODE = ?   and a.CHOSCODE = ?

    </sql>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>
  <Opt id="FindWZStockAlarmStockInfo">
    <sql>
      <![CDATA[
    
     
 select a.STOCKID,  a.WARECODE , a.WZID , a.NUM , a.LSUNITCODE , a.NUMSX , a.NUMXX  , a.MEMO, a.CHOSCODE,b.WZNAME FROM  LKWZ.WZSTOCK a left join LKWZ.DICTWZ  b on a.WZID=b.WZID   WHERE    a.WARECODE = ?    and  a.CHOSCODE = ? and  [Condition] 
       ]]>
    </sql>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>
  </Opt>


  <!--物资库存预警止-->

  <!--物资库存查询始-->


  <Opt id="WZStockQuery_SearchStock">
    <sql>

      <!--select a.FLOWNO,a.WZID,b.WZNAME,c.NUM,a.WARECODE,a.STOCKID,a.BEFORENUM,a.STOCKID,a.LSUNITCODE,
      a.CHANGERATE,a.OUTNUM,a.PRICE,a.LSPRICE,a.PH,a.PZWH
      a.SUPPLYID,a.SUPPLYNAME,a.PRODUCTDATE,a.VALIDDATE,a.WSXKZH,a.MEMO,a.TXM,a.RECIPECODE,
      a.SHDH,a.SUPPLYID2,a.SUPPLYNAME2,a.INDATE,a.CHOSCODE  from LKWZ.WZSTOCKDETAIL a
      left join LKWZ.DICTWZ b on a.WZID=b.WZID left join LKWZ.WZSTOCK c on a.WZID=c.WZID
      where  a.CHOSCODE = ? [Condition]-->

      select c.STOCKID,c.WARECODE,c.WZID,b.WZNAME,c.NUMSX,c.NUMXX,c.MEMO,c.LSUNITCODE,
      c.CHOSCODE,c.NUM,d.WARENAME,e.KINDCODE from   LKWZ.WZSTOCK c  left join LKWZ.DICTWZ b on c.WZID=b.WZID left join LKWZ.DICTWZWARE d on c.WARECODE=d.WARECODE
      left join LKWZ.DICTWZ e on c.WZID=e.WZID
      where c.WARECODE=? and c.CHOSCODE = ?  [Condition]  order by c.STOCKID desc


    </sql>
    <Pa name="WARECODE"/>
    <Pa name="CHOSCODE"/>


  </Opt>

  <!--物资库存查询止-->




  <!--显示字段转换-->


  <Opt id="Chang_LSDanWeiBianMa">
    <sql>
      select DICID,DICDESC from 字典表 where Dicgrpid=301
    </sql>
  </Opt>

  <Opt id="Chang_KaiJiedankeshi">
    <sql>
      select ID,名称 from 科室表 where CHOSCODE=?
    </sql>
    <Pa name="CHOSCODE"/>
  </Opt>
  <!--显示字段转换-->


</opts>
